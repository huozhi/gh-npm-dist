{"version":3,"sources":["../../server/render.tsx"],"sourcesContent":["import { IncomingMessage, ServerResponse } from 'http'\nimport { ParsedUrlQuery, stringify as stringifyQuery } from 'querystring'\nimport React from 'react'\nimport { createFromReadableStream } from 'next/dist/compiled/react-server-dom-webpack'\nimport { renderToReadableStream } from 'next/dist/compiled/react-server-dom-webpack/writer.browser.server'\nimport { StyleRegistry, createStyleRegistry } from 'styled-jsx'\nimport { UnwrapPromise } from '../lib/coalesced-function'\nimport {\n  GSP_NO_RETURNED_VALUE,\n  GSSP_COMPONENT_MEMBER_ERROR,\n  GSSP_NO_RETURNED_VALUE,\n  STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR,\n  SERVER_PROPS_GET_INIT_PROPS_CONFLICT,\n  SERVER_PROPS_SSG_CONFLICT,\n  SSG_GET_INITIAL_PROPS_CONFLICT,\n  UNSTABLE_REVALIDATE_RENAME_ERROR,\n} from '../lib/constants'\nimport { isSerializableProps } from '../lib/is-serializable-props'\nimport { GetServerSideProps, GetStaticProps, PreviewData } from '../types'\nimport { isInAmpMode } from '../shared/lib/amp'\nimport { AmpStateContext } from '../shared/lib/amp-context'\nimport {\n  SERVER_PROPS_ID,\n  STATIC_PROPS_ID,\n  STATIC_STATUS_PAGES,\n} from '../shared/lib/constants'\nimport { defaultHead } from '../shared/lib/head'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context'\nimport Loadable from '../shared/lib/loadable'\nimport { LoadableContext } from '../shared/lib/loadable-context'\nimport { RouterContext } from '../shared/lib/router-context'\nimport { NextRouter } from '../shared/lib/router/router'\nimport { isDynamicRoute } from '../shared/lib/router/utils/is-dynamic'\nimport {\n  AppType,\n  ComponentsEnhancer,\n  DocumentInitialProps,\n  DocumentProps,\n  DocumentContext,\n  HtmlContext,\n  HtmlProps,\n  getDisplayName,\n  isResSent,\n  loadGetInitialProps,\n  NextComponentType,\n  RenderPage,\n  RenderPageResult,\n} from '../shared/lib/utils'\nimport type { NextApiRequestCookies, __ApiPreviewProps } from './api-utils'\nimport { denormalizePagePath } from './denormalize-page-path'\nimport type { FontManifest } from './font-utils'\nimport type { LoadComponentsReturnType, ManifestItem } from './load-components'\nimport { normalizePagePath } from './normalize-page-path'\nimport { getRequestMeta, NextParsedUrlQuery } from './request-meta'\nimport {\n  allowedStatusCodes,\n  getRedirectStatus,\n  Redirect,\n} from '../lib/load-custom-routes'\nimport { DomainLocale } from './config'\nimport RenderResult from './render-result'\nimport isError from '../lib/is-error'\nimport { readableStreamTee } from './web/utils'\n\nlet optimizeAmp: typeof import('./optimize-amp').default\nlet getFontDefinitionFromManifest: typeof import('./font-utils').getFontDefinitionFromManifest\nlet tryGetPreviewData: typeof import('./api-utils').tryGetPreviewData\nlet warn: typeof import('../build/output/log').warn\nlet postProcess: typeof import('../shared/lib/post-process').default\n\nconst DOCTYPE = '<!DOCTYPE html>'\n\nif (!process.browser) {\n  require('./node-polyfill-web-streams')\n  optimizeAmp = require('./optimize-amp').default\n  getFontDefinitionFromManifest =\n    require('./font-utils').getFontDefinitionFromManifest\n  tryGetPreviewData = require('./api-utils').tryGetPreviewData\n  warn = require('../build/output/log').warn\n  postProcess = require('../shared/lib/post-process').default\n} else {\n  warn = console.warn.bind(console)\n}\n\nfunction noRouter() {\n  const message =\n    'No router instance found. you should only use \"next/router\" inside the client side of your app. https://nextjs.org/docs/messages/no-router-instance'\n  throw new Error(message)\n}\n\nclass ServerRouter implements NextRouter {\n  route: string\n  pathname: string\n  query: ParsedUrlQuery\n  asPath: string\n  basePath: string\n  events: any\n  isFallback: boolean\n  locale?: string\n  isReady: boolean\n  locales?: string[]\n  defaultLocale?: string\n  domainLocales?: DomainLocale[]\n  isPreview: boolean\n  isLocaleDomain: boolean\n\n  constructor(\n    pathname: string,\n    query: ParsedUrlQuery,\n    as: string,\n    { isFallback }: { isFallback: boolean },\n    isReady: boolean,\n    basePath: string,\n    locale?: string,\n    locales?: string[],\n    defaultLocale?: string,\n    domainLocales?: DomainLocale[],\n    isPreview?: boolean,\n    isLocaleDomain?: boolean\n  ) {\n    this.route = pathname.replace(/\\/$/, '') || '/'\n    this.pathname = pathname\n    this.query = query\n    this.asPath = as\n    this.isFallback = isFallback\n    this.basePath = basePath\n    this.locale = locale\n    this.locales = locales\n    this.defaultLocale = defaultLocale\n    this.isReady = isReady\n    this.domainLocales = domainLocales\n    this.isPreview = !!isPreview\n    this.isLocaleDomain = !!isLocaleDomain\n  }\n\n  push(): any {\n    noRouter()\n  }\n  replace(): any {\n    noRouter()\n  }\n  reload() {\n    noRouter()\n  }\n  back() {\n    noRouter()\n  }\n  prefetch(): any {\n    noRouter()\n  }\n  beforePopState() {\n    noRouter()\n  }\n}\n\nfunction enhanceComponents(\n  options: ComponentsEnhancer,\n  App: AppType,\n  Component: NextComponentType\n): {\n  App: AppType\n  Component: NextComponentType\n} {\n  // For backwards compatibility\n  if (typeof options === 'function') {\n    return {\n      App,\n      Component: options(Component),\n    }\n  }\n\n  return {\n    App: options.enhanceApp ? options.enhanceApp(App) : App,\n    Component: options.enhanceComponent\n      ? options.enhanceComponent(Component)\n      : Component,\n  }\n}\n\nfunction renderFlight(\n  App: AppType,\n  Component: React.ComponentType,\n  props: any\n) {\n  const AppServer = (App as any).__next_rsc__\n    ? (App as React.ComponentType)\n    : React.Fragment\n  return (\n    <AppServer>\n      <Component {...props} />\n    </AppServer>\n  )\n}\n\nexport type RenderOptsPartial = {\n  buildId: string\n  canonicalBase: string\n  runtimeConfig?: { [key: string]: any }\n  assetPrefix?: string\n  err?: Error | null\n  nextExport?: boolean\n  dev?: boolean\n  ampPath?: string\n  ErrorDebug?: React.ComponentType<{ error: Error }>\n  ampValidator?: (html: string, pathname: string) => Promise<void>\n  ampSkipValidation?: boolean\n  ampOptimizerConfig?: { [key: string]: any }\n  isDataReq?: boolean\n  params?: ParsedUrlQuery\n  previewProps: __ApiPreviewProps\n  basePath: string\n  unstable_runtimeJS?: false\n  unstable_JsPreload?: false\n  optimizeFonts: boolean\n  fontManifest?: FontManifest\n  optimizeImages: boolean\n  optimizeCss: any\n  devOnlyCacheBusterQueryString?: string\n  resolvedUrl?: string\n  resolvedAsPath?: string\n  serverComponentManifest?: any\n  renderServerComponentData?: boolean\n  serverComponentProps?: any\n  distDir?: string\n  locale?: string\n  locales?: string[]\n  defaultLocale?: string\n  domainLocales?: DomainLocale[]\n  disableOptimizedLoading?: boolean\n  supportsDynamicHTML?: boolean\n  concurrentFeatures?: boolean\n  serverComponents?: boolean\n  customServer?: boolean\n  crossOrigin?: string\n}\n\nexport type RenderOpts = LoadComponentsReturnType & RenderOptsPartial\n\nconst invalidKeysMsg = (methodName: string, invalidKeys: string[]) => {\n  return (\n    `Additional keys were returned from \\`${methodName}\\`. Properties intended for your component must be nested under the \\`props\\` key, e.g.:` +\n    `\\n\\n\\treturn { props: { title: 'My Title', content: '...' } }` +\n    `\\n\\nKeys that need to be moved: ${invalidKeys.join(', ')}.` +\n    `\\nRead more: https://nextjs.org/docs/messages/invalid-getstaticprops-value`\n  )\n}\n\nfunction checkRedirectValues(\n  redirect: Redirect,\n  req: IncomingMessage,\n  method: 'getStaticProps' | 'getServerSideProps'\n) {\n  const { destination, permanent, statusCode, basePath } = redirect\n  let errors: string[] = []\n\n  const hasStatusCode = typeof statusCode !== 'undefined'\n  const hasPermanent = typeof permanent !== 'undefined'\n\n  if (hasPermanent && hasStatusCode) {\n    errors.push(`\\`permanent\\` and \\`statusCode\\` can not both be provided`)\n  } else if (hasPermanent && typeof permanent !== 'boolean') {\n    errors.push(`\\`permanent\\` must be \\`true\\` or \\`false\\``)\n  } else if (hasStatusCode && !allowedStatusCodes.has(statusCode!)) {\n    errors.push(\n      `\\`statusCode\\` must undefined or one of ${[...allowedStatusCodes].join(\n        ', '\n      )}`\n    )\n  }\n  const destinationType = typeof destination\n\n  if (destinationType !== 'string') {\n    errors.push(\n      `\\`destination\\` should be string but received ${destinationType}`\n    )\n  }\n\n  const basePathType = typeof basePath\n\n  if (basePathType !== 'undefined' && basePathType !== 'boolean') {\n    errors.push(\n      `\\`basePath\\` should be undefined or a false, received ${basePathType}`\n    )\n  }\n\n  if (errors.length > 0) {\n    throw new Error(\n      `Invalid redirect object returned from ${method} for ${req.url}\\n` +\n        errors.join(' and ') +\n        '\\n' +\n        `See more info here: https://nextjs.org/docs/messages/invalid-redirect-gssp`\n    )\n  }\n}\n\nconst rscCache = new Map()\n\nfunction createRSCHook() {\n  const decoder = new TextDecoder()\n  const encoder = new TextEncoder()\n\n  return (\n    writable: WritableStream,\n    id: string,\n    req: ReadableStream,\n    bootstrap: boolean\n  ) => {\n    let entry = rscCache.get(id)\n    if (!entry) {\n      const [renderStream, forwardStream] = readableStreamTee(req)\n      entry = createFromReadableStream(renderStream)\n      rscCache.set(id, entry)\n\n      let bootstrapped = false\n      const forwardReader = forwardStream.getReader()\n      const writer = writable.getWriter()\n      function process() {\n        forwardReader.read().then(({ done, value }) => {\n          if (bootstrap && !bootstrapped) {\n            bootstrapped = true\n            writer.write(\n              encoder.encode(\n                `<script>(self.__next_s=self.__next_s||[]).push(${JSON.stringify(\n                  [0, id]\n                )})</script>`\n              )\n            )\n          }\n          if (done) {\n            rscCache.delete(id)\n            writer.close()\n          } else {\n            writer.write(\n              encoder.encode(\n                `<script>(self.__next_s=self.__next_s||[]).push(${JSON.stringify(\n                  [1, id, decoder.decode(value)]\n                )})</script>`\n              )\n            )\n            process()\n          }\n        })\n      }\n      process()\n    }\n    return entry\n  }\n}\n\nconst useRSCResponse = createRSCHook()\n\n// Create the wrapper component for a Flight stream.\nfunction createServerComponentRenderer(\n  cachePrefix: string,\n  transformStream: TransformStream,\n  App: AppType,\n  OriginalComponent: React.ComponentType,\n  serverComponentManifest: NonNullable<RenderOpts['serverComponentManifest']>\n) {\n  const writable = transformStream.writable\n  const ServerComponentWrapper = (props: any) => {\n    const id = (React as any).useId()\n    const reqStream = renderToReadableStream(\n      renderFlight(App, OriginalComponent, props),\n      serverComponentManifest\n    )\n\n    const response = useRSCResponse(\n      writable,\n      cachePrefix + ',' + id,\n      reqStream,\n      true\n    )\n    const root = response.readRoot()\n    rscCache.delete(id)\n    return root\n  }\n\n  const Component = (props: any) => {\n    return (\n      <React.Suspense fallback={null}>\n        <ServerComponentWrapper {...props} />\n      </React.Suspense>\n    )\n  }\n\n  // Although it's not allowed to attach some static methods to Component,\n  // we still re-assign all the component APIs to keep the behavior unchanged.\n  for (const methodName of [\n    'getInitialProps',\n    'getStaticProps',\n    'getServerSideProps',\n    'getStaticPaths',\n  ]) {\n    const method = (OriginalComponent as any)[methodName]\n    if (method) {\n      ;(Component as any)[methodName] = method\n    }\n  }\n\n  return Component\n}\n\nexport async function renderToHTML(\n  req: IncomingMessage,\n  res: ServerResponse,\n  pathname: string,\n  query: NextParsedUrlQuery,\n  renderOpts: RenderOpts\n): Promise<RenderResult | null> {\n  // In dev we invalidate the cache by appending a timestamp to the resource URL.\n  // This is a workaround to fix https://github.com/vercel/next.js/issues/5860\n  // TODO: remove this workaround when https://bugs.webkit.org/show_bug.cgi?id=187726 is fixed.\n  renderOpts.devOnlyCacheBusterQueryString = renderOpts.dev\n    ? renderOpts.devOnlyCacheBusterQueryString || `?ts=${Date.now()}`\n    : ''\n\n  // don't modify original query object\n  query = Object.assign({}, query)\n\n  const {\n    err,\n    dev = false,\n    ampPath = '',\n    App,\n    Document,\n    pageConfig = {},\n    buildManifest,\n    fontManifest,\n    reactLoadableManifest,\n    ErrorDebug,\n    getStaticProps,\n    getStaticPaths,\n    getServerSideProps,\n    serverComponentManifest,\n    renderServerComponentData,\n    serverComponentProps,\n    isDataReq,\n    params,\n    previewProps,\n    basePath,\n    devOnlyCacheBusterQueryString,\n    supportsDynamicHTML,\n    concurrentFeatures,\n  } = renderOpts\n\n  const isServerComponent = !!serverComponentManifest\n  const OriginalComponent = renderOpts.Component\n  const serverComponentsInlinedTransformStream =\n    process.browser && isServerComponent ? new TransformStream() : null\n  const search = stringifyQuery(query)\n  const cachePrefix = pathname + '?' + search\n  const Component = isServerComponent\n    ? createServerComponentRenderer(\n        cachePrefix,\n        serverComponentsInlinedTransformStream!,\n        App,\n        OriginalComponent,\n        serverComponentManifest\n      )\n    : renderOpts.Component\n\n  const getFontDefinition = (url: string): string => {\n    if (fontManifest) {\n      return getFontDefinitionFromManifest(url, fontManifest)\n    }\n    return ''\n  }\n\n  const callMiddleware = async (method: string, args: any[], props = false) => {\n    let results: any = props ? {} : []\n\n    if ((Document as any)[`${method}Middleware`]) {\n      let middlewareFunc = await (Document as any)[`${method}Middleware`]\n      middlewareFunc = middlewareFunc.default || middlewareFunc\n\n      const curResults = await middlewareFunc(...args)\n      if (props) {\n        for (const result of curResults) {\n          results = {\n            ...results,\n            ...result,\n          }\n        }\n      } else {\n        results = curResults\n      }\n    }\n    return results\n  }\n\n  const headTags = (...args: any) => callMiddleware('headTags', args)\n\n  const isFallback = !!query.__nextFallback\n  delete query.__nextFallback\n  delete query.__nextLocale\n  delete query.__nextDefaultLocale\n\n  const isSSG = !!getStaticProps\n  const isBuildTimeSSG = isSSG && renderOpts.nextExport\n  const defaultAppGetInitialProps =\n    App.getInitialProps === (App as any).origGetInitialProps\n\n  const hasPageGetInitialProps = !!(Component as any).getInitialProps\n\n  const pageIsDynamic = isDynamicRoute(pathname)\n\n  const isAutoExport =\n    !hasPageGetInitialProps &&\n    defaultAppGetInitialProps &&\n    !isSSG &&\n    !getServerSideProps &&\n    !concurrentFeatures\n\n  for (const methodName of [\n    'getStaticProps',\n    'getServerSideProps',\n    'getStaticPaths',\n  ]) {\n    if ((Component as any)[methodName]) {\n      throw new Error(\n        `page ${pathname} ${methodName} ${GSSP_COMPONENT_MEMBER_ERROR}`\n      )\n    }\n  }\n\n  if (hasPageGetInitialProps && isSSG) {\n    throw new Error(SSG_GET_INITIAL_PROPS_CONFLICT + ` ${pathname}`)\n  }\n\n  if (hasPageGetInitialProps && getServerSideProps) {\n    throw new Error(SERVER_PROPS_GET_INIT_PROPS_CONFLICT + ` ${pathname}`)\n  }\n\n  if (getServerSideProps && isSSG) {\n    throw new Error(SERVER_PROPS_SSG_CONFLICT + ` ${pathname}`)\n  }\n\n  if (getStaticPaths && !pageIsDynamic) {\n    throw new Error(\n      `getStaticPaths is only allowed for dynamic SSG pages and was found on '${pathname}'.` +\n        `\\nRead more: https://nextjs.org/docs/messages/non-dynamic-getstaticpaths-usage`\n    )\n  }\n\n  if (!!getStaticPaths && !isSSG) {\n    throw new Error(\n      `getStaticPaths was added without a getStaticProps in ${pathname}. Without getStaticProps, getStaticPaths does nothing`\n    )\n  }\n\n  if (isSSG && pageIsDynamic && !getStaticPaths) {\n    throw new Error(\n      `getStaticPaths is required for dynamic SSG pages and is missing for '${pathname}'.` +\n        `\\nRead more: https://nextjs.org/docs/messages/invalid-getstaticpaths-value`\n    )\n  }\n\n  let asPath: string = renderOpts.resolvedAsPath || (req.url as string)\n\n  if (dev) {\n    const { isValidElementType } = require('next/dist/compiled/react-is')\n    if (!isValidElementType(Component)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"${pathname}\"`\n      )\n    }\n\n    if (!isValidElementType(App)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"/_app\"`\n      )\n    }\n\n    if (!isValidElementType(Document)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"/_document\"`\n      )\n    }\n\n    if (isAutoExport || isFallback) {\n      // remove query values except ones that will be set during export\n      query = {\n        ...(query.amp\n          ? {\n              amp: query.amp,\n            }\n          : {}),\n      }\n      asPath = `${pathname}${\n        // ensure trailing slash is present for non-dynamic auto-export pages\n        req.url!.endsWith('/') && pathname !== '/' && !pageIsDynamic ? '/' : ''\n      }`\n      req.url = pathname\n    }\n\n    if (pathname === '/404' && (hasPageGetInitialProps || getServerSideProps)) {\n      throw new Error(\n        `\\`pages/404\\` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`\n      )\n    }\n    if (\n      STATIC_STATUS_PAGES.includes(pathname) &&\n      (hasPageGetInitialProps || getServerSideProps)\n    ) {\n      throw new Error(\n        `\\`pages${pathname}\\` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`\n      )\n    }\n  }\n\n  await Loadable.preloadAll() // Make sure all dynamic imports are loaded\n\n  let isPreview\n  let previewData: PreviewData\n\n  if ((isSSG || getServerSideProps) && !isFallback && !process.browser) {\n    // Reads of this are cached on the `req` object, so this should resolve\n    // instantly. There's no need to pass this data down from a previous\n    // invoke, where we'd have to consider server & serverless.\n    previewData = tryGetPreviewData(req, res, previewProps)\n    isPreview = previewData !== false\n  }\n\n  // url will always be set\n  const routerIsReady = !!(\n    getServerSideProps ||\n    hasPageGetInitialProps ||\n    (!defaultAppGetInitialProps && !isSSG)\n  )\n  const router = new ServerRouter(\n    pathname,\n    query,\n    asPath,\n    {\n      isFallback: isFallback,\n    },\n    routerIsReady,\n    basePath,\n    renderOpts.locale,\n    renderOpts.locales,\n    renderOpts.defaultLocale,\n    renderOpts.domainLocales,\n    isPreview,\n    getRequestMeta(req, '__nextIsLocaleDomain')\n  )\n  const jsxStyleRegistry = createStyleRegistry()\n  const ctx = {\n    err,\n    req: isAutoExport ? undefined : req,\n    res: isAutoExport ? undefined : res,\n    pathname,\n    query,\n    asPath,\n    locale: renderOpts.locale,\n    locales: renderOpts.locales,\n    defaultLocale: renderOpts.defaultLocale,\n    AppTree: (props: any) => {\n      return (\n        <AppContainerWithIsomorphicFiberStructure>\n          <App {...props} Component={Component} router={router} />\n        </AppContainerWithIsomorphicFiberStructure>\n      )\n    },\n    defaultGetInitialProps: async (\n      docCtx: DocumentContext,\n      options: { nonce?: string } = {}\n    ): Promise<DocumentInitialProps> => {\n      const enhanceApp = (AppComp: any) => {\n        return (props: any) => <AppComp {...props} />\n      }\n\n      const { html, head } = await docCtx.renderPage({ enhanceApp })\n      const styles = jsxStyleRegistry.styles({ nonce: options.nonce })\n      return { html, head, styles }\n    },\n  }\n  let props: any\n\n  const ampState = {\n    ampFirst: pageConfig.amp === true,\n    hasQuery: Boolean(query.amp),\n    hybrid: pageConfig.amp === 'hybrid',\n  }\n\n  // Disable AMP under the web environment\n  const inAmpMode = !process.browser && isInAmpMode(ampState)\n\n  const reactLoadableModules: string[] = []\n\n  let head: JSX.Element[] = defaultHead(inAmpMode)\n\n  let scriptLoader: any = {}\n  const nextExport =\n    !isSSG && (renderOpts.nextExport || (dev && (isAutoExport || isFallback)))\n\n  const AppContainer = ({ children }: { children: JSX.Element }) => (\n    <RouterContext.Provider value={router}>\n      <AmpStateContext.Provider value={ampState}>\n        <HeadManagerContext.Provider\n          value={{\n            updateHead: (state) => {\n              head = state\n            },\n            updateScripts: (scripts) => {\n              scriptLoader = scripts\n            },\n            scripts: {},\n            mountedInstances: new Set(),\n          }}\n        >\n          <LoadableContext.Provider\n            value={(moduleName) => reactLoadableModules.push(moduleName)}\n          >\n            <StyleRegistry registry={jsxStyleRegistry}>\n              {children}\n            </StyleRegistry>\n          </LoadableContext.Provider>\n        </HeadManagerContext.Provider>\n      </AmpStateContext.Provider>\n    </RouterContext.Provider>\n  )\n\n  // The `useId` API uses the path indexes to generate an ID for each node.\n  // To guarantee the match of hydration, we need to ensure that the structure\n  // of wrapper nodes is isomorphic in server and client.\n  // TODO: With `enhanceApp` and `enhanceComponents` options, this approach may\n  // not be useful.\n  // https://github.com/facebook/react/pull/22644\n  const Noop = () => null\n  const AppContainerWithIsomorphicFiberStructure: React.FC<{\n    children: JSX.Element\n  }> = ({ children }) => {\n    return (\n      <>\n        {/* <Head/> */}\n        <Noop />\n        <AppContainer>\n          <>\n            {/* <ReactDevOverlay/> */}\n            {dev ? (\n              <>\n                {children}\n                <Noop />\n              </>\n            ) : (\n              children\n            )}\n            {/* <RouteAnnouncer/> */}\n            <Noop />\n          </>\n        </AppContainer>\n      </>\n    )\n  }\n\n  props = await loadGetInitialProps(App, {\n    AppTree: ctx.AppTree,\n    Component,\n    router,\n    ctx,\n  })\n\n  if ((isSSG || getServerSideProps) && isPreview) {\n    props.__N_PREVIEW = true\n  }\n\n  if (isSSG) {\n    props[STATIC_PROPS_ID] = true\n  }\n\n  if (isSSG && !isFallback) {\n    let data: UnwrapPromise<ReturnType<GetStaticProps>>\n\n    try {\n      data = await getStaticProps!({\n        ...(pageIsDynamic ? { params: query as ParsedUrlQuery } : undefined),\n        ...(isPreview\n          ? { preview: true, previewData: previewData }\n          : undefined),\n        locales: renderOpts.locales,\n        locale: renderOpts.locale,\n        defaultLocale: renderOpts.defaultLocale,\n      })\n    } catch (staticPropsError: any) {\n      // remove not found error code to prevent triggering legacy\n      // 404 rendering\n      if (staticPropsError && staticPropsError.code === 'ENOENT') {\n        delete staticPropsError.code\n      }\n      throw staticPropsError\n    }\n\n    if (data == null) {\n      throw new Error(GSP_NO_RETURNED_VALUE)\n    }\n\n    const invalidKeys = Object.keys(data).filter(\n      (key) =>\n        key !== 'revalidate' &&\n        key !== 'props' &&\n        key !== 'redirect' &&\n        key !== 'notFound'\n    )\n\n    if (invalidKeys.includes('unstable_revalidate')) {\n      throw new Error(UNSTABLE_REVALIDATE_RENAME_ERROR)\n    }\n\n    if (invalidKeys.length) {\n      throw new Error(invalidKeysMsg('getStaticProps', invalidKeys))\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        typeof (data as any).notFound !== 'undefined' &&\n        typeof (data as any).redirect !== 'undefined'\n      ) {\n        throw new Error(\n          `\\`redirect\\` and \\`notFound\\` can not both be returned from ${\n            isSSG ? 'getStaticProps' : 'getServerSideProps'\n          } at the same time. Page: ${pathname}\\nSee more info here: https://nextjs.org/docs/messages/gssp-mixed-not-found-redirect`\n        )\n      }\n    }\n\n    if ('notFound' in data && data.notFound) {\n      if (pathname === '/404') {\n        throw new Error(\n          `The /404 page can not return notFound in \"getStaticProps\", please remove it to continue!`\n        )\n      }\n\n      ;(renderOpts as any).isNotFound = true\n    }\n\n    if (\n      'redirect' in data &&\n      data.redirect &&\n      typeof data.redirect === 'object'\n    ) {\n      checkRedirectValues(data.redirect as Redirect, req, 'getStaticProps')\n\n      if (isBuildTimeSSG) {\n        throw new Error(\n          `\\`redirect\\` can not be returned from getStaticProps during prerendering (${req.url})\\n` +\n            `See more info here: https://nextjs.org/docs/messages/gsp-redirect-during-prerender`\n        )\n      }\n\n      ;(data as any).props = {\n        __N_REDIRECT: data.redirect.destination,\n        __N_REDIRECT_STATUS: getRedirectStatus(data.redirect),\n      }\n      if (typeof data.redirect.basePath !== 'undefined') {\n        ;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath\n      }\n      ;(renderOpts as any).isRedirect = true\n    }\n\n    if (\n      (dev || isBuildTimeSSG) &&\n      !(renderOpts as any).isNotFound &&\n      !isSerializableProps(pathname, 'getStaticProps', (data as any).props)\n    ) {\n      // this fn should throw an error instead of ever returning `false`\n      throw new Error(\n        'invariant: getStaticProps did not return valid props. Please report this.'\n      )\n    }\n\n    if ('revalidate' in data) {\n      if (typeof data.revalidate === 'number') {\n        if (!Number.isInteger(data.revalidate)) {\n          throw new Error(\n            `A page's revalidate option must be seconds expressed as a natural number for ${req.url}. Mixed numbers, such as '${data.revalidate}', cannot be used.` +\n              `\\nTry changing the value to '${Math.ceil(\n                data.revalidate\n              )}' or using \\`Math.ceil()\\` if you're computing the value.`\n          )\n        } else if (data.revalidate <= 0) {\n          throw new Error(\n            `A page's revalidate option can not be less than or equal to zero for ${req.url}. A revalidate option of zero means to revalidate after _every_ request, and implies stale data cannot be tolerated.` +\n              `\\n\\nTo never revalidate, you can set revalidate to \\`false\\` (only ran once at build-time).` +\n              `\\nTo revalidate as soon as possible, you can set the value to \\`1\\`.`\n          )\n        } else if (data.revalidate > 31536000) {\n          // if it's greater than a year for some reason error\n          console.warn(\n            `Warning: A page's revalidate option was set to more than a year for ${req.url}. This may have been done in error.` +\n              `\\nTo only run getStaticProps at build-time and not revalidate at runtime, you can set \\`revalidate\\` to \\`false\\`!`\n          )\n        }\n      } else if (data.revalidate === true) {\n        // When enabled, revalidate after 1 second. This value is optimal for\n        // the most up-to-date page possible, but without a 1-to-1\n        // request-refresh ratio.\n        data.revalidate = 1\n      } else if (\n        data.revalidate === false ||\n        typeof data.revalidate === 'undefined'\n      ) {\n        // By default, we never revalidate.\n        data.revalidate = false\n      } else {\n        throw new Error(\n          `A page's revalidate option must be seconds expressed as a natural number. Mixed numbers and strings cannot be used. Received '${JSON.stringify(\n            data.revalidate\n          )}' for ${req.url}`\n        )\n      }\n    } else {\n      // By default, we never revalidate.\n      ;(data as any).revalidate = false\n    }\n\n    props.pageProps = Object.assign(\n      {},\n      props.pageProps,\n      'props' in data ? data.props : undefined\n    )\n\n    // pass up revalidate and props for export\n    // TODO: change this to a different passing mechanism\n    ;(renderOpts as any).revalidate =\n      'revalidate' in data ? data.revalidate : undefined\n    ;(renderOpts as any).pageData = props\n\n    // this must come after revalidate is added to renderOpts\n    if ((renderOpts as any).isNotFound) {\n      return null\n    }\n  }\n\n  if (getServerSideProps) {\n    props[SERVER_PROPS_ID] = true\n  }\n\n  if (getServerSideProps && !isFallback) {\n    let data: UnwrapPromise<ReturnType<GetServerSideProps>>\n\n    let canAccessRes = true\n    let resOrProxy = res\n    let deferredContent = false\n    if (process.env.NODE_ENV !== 'production') {\n      resOrProxy = new Proxy<ServerResponse>(res, {\n        get: function (obj, prop, receiver) {\n          if (!canAccessRes) {\n            const message =\n              `You should not access 'res' after getServerSideProps resolves.` +\n              `\\nRead more: https://nextjs.org/docs/messages/gssp-no-mutating-res`\n\n            if (deferredContent) {\n              throw new Error(message)\n            } else {\n              warn(message)\n            }\n          }\n          const value = Reflect.get(obj, prop, receiver)\n\n          // since ServerResponse uses internal fields which\n          // proxy can't map correctly we need to ensure functions\n          // are bound correctly while being proxied\n          if (typeof value === 'function') {\n            return value.bind(obj)\n          }\n          return value\n        },\n      })\n    }\n\n    try {\n      data = await getServerSideProps({\n        req: req as IncomingMessage & {\n          cookies: NextApiRequestCookies\n        },\n        res: resOrProxy,\n        query,\n        resolvedUrl: renderOpts.resolvedUrl as string,\n        ...(pageIsDynamic ? { params: params as ParsedUrlQuery } : undefined),\n        ...(previewData !== false\n          ? { preview: true, previewData: previewData }\n          : undefined),\n        locales: renderOpts.locales,\n        locale: renderOpts.locale,\n        defaultLocale: renderOpts.defaultLocale,\n      })\n      canAccessRes = false\n    } catch (serverSidePropsError: any) {\n      // remove not found error code to prevent triggering legacy\n      // 404 rendering\n      if (\n        isError(serverSidePropsError) &&\n        serverSidePropsError.code === 'ENOENT'\n      ) {\n        delete serverSidePropsError.code\n      }\n      throw serverSidePropsError\n    }\n\n    if (data == null) {\n      throw new Error(GSSP_NO_RETURNED_VALUE)\n    }\n\n    if ((data as any).props instanceof Promise) {\n      deferredContent = true\n    }\n\n    const invalidKeys = Object.keys(data).filter(\n      (key) => key !== 'props' && key !== 'redirect' && key !== 'notFound'\n    )\n\n    if ((data as any).unstable_notFound) {\n      throw new Error(\n        `unstable_notFound has been renamed to notFound, please update the field to continue. Page: ${pathname}`\n      )\n    }\n    if ((data as any).unstable_redirect) {\n      throw new Error(\n        `unstable_redirect has been renamed to redirect, please update the field to continue. Page: ${pathname}`\n      )\n    }\n\n    if (invalidKeys.length) {\n      throw new Error(invalidKeysMsg('getServerSideProps', invalidKeys))\n    }\n\n    if ('notFound' in data && data.notFound) {\n      if (pathname === '/404') {\n        throw new Error(\n          `The /404 page can not return notFound in \"getStaticProps\", please remove it to continue!`\n        )\n      }\n\n      ;(renderOpts as any).isNotFound = true\n      return null\n    }\n\n    if ('redirect' in data && typeof data.redirect === 'object') {\n      checkRedirectValues(data.redirect as Redirect, req, 'getServerSideProps')\n      ;(data as any).props = {\n        __N_REDIRECT: data.redirect.destination,\n        __N_REDIRECT_STATUS: getRedirectStatus(data.redirect),\n      }\n      if (typeof data.redirect.basePath !== 'undefined') {\n        ;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath\n      }\n      ;(renderOpts as any).isRedirect = true\n    }\n\n    if (deferredContent) {\n      ;(data as any).props = await (data as any).props\n    }\n\n    if (\n      (dev || isBuildTimeSSG) &&\n      !isSerializableProps(pathname, 'getServerSideProps', (data as any).props)\n    ) {\n      // this fn should throw an error instead of ever returning `false`\n      throw new Error(\n        'invariant: getServerSideProps did not return valid props. Please report this.'\n      )\n    }\n\n    props.pageProps = Object.assign({}, props.pageProps, (data as any).props)\n    ;(renderOpts as any).pageData = props\n  }\n\n  if (\n    !isSSG && // we only show this warning for legacy pages\n    !getServerSideProps &&\n    process.env.NODE_ENV !== 'production' &&\n    Object.keys(props?.pageProps || {}).includes('url')\n  ) {\n    console.warn(\n      `The prop \\`url\\` is a reserved prop in Next.js for legacy reasons and will be overridden on page ${pathname}\\n` +\n        `See more info here: https://nextjs.org/docs/messages/reserved-page-prop`\n    )\n  }\n\n  // Avoid rendering page un-necessarily for getServerSideProps data request\n  // and getServerSideProps/getStaticProps redirects\n  if ((isDataReq && !isSSG) || (renderOpts as any).isRedirect) {\n    return RenderResult.fromStatic(JSON.stringify(props))\n  }\n\n  // We don't call getStaticProps or getServerSideProps while generating\n  // the fallback so make sure to set pageProps to an empty object\n  if (isFallback) {\n    props.pageProps = {}\n  }\n\n  // Pass router to the Server Component as a temporary workaround.\n  if (isServerComponent) {\n    props.pageProps = Object.assign({}, props.pageProps, { router })\n  }\n\n  // the response might be finished on the getInitialProps call\n  if (isResSent(res) && !isSSG) return null\n\n  if (renderServerComponentData) {\n    const stream: ReadableStream = renderToReadableStream(\n      renderFlight(App, OriginalComponent, {\n        ...props.pageProps,\n        ...serverComponentProps,\n      }),\n      serverComponentManifest\n    )\n    return new RenderResult(stream.pipeThrough(createBufferedTransformStream()))\n  }\n\n  // we preload the buildManifest for auto-export dynamic pages\n  // to speed up hydrating query values\n  let filteredBuildManifest = buildManifest\n  if (isAutoExport && pageIsDynamic) {\n    const page = denormalizePagePath(normalizePagePath(pathname))\n    // This code would be much cleaner using `immer` and directly pushing into\n    // the result from `getPageFiles`, we could maybe consider that in the\n    // future.\n    if (page in filteredBuildManifest.pages) {\n      filteredBuildManifest = {\n        ...filteredBuildManifest,\n        pages: {\n          ...filteredBuildManifest.pages,\n          [page]: [\n            ...filteredBuildManifest.pages[page],\n            ...filteredBuildManifest.lowPriorityFiles.filter((f) =>\n              f.includes('_buildManifest')\n            ),\n          ],\n        },\n        lowPriorityFiles: filteredBuildManifest.lowPriorityFiles.filter(\n          (f) => !f.includes('_buildManifest')\n        ),\n      }\n    }\n  }\n\n  const Body = ({ children }: { children: JSX.Element }) => {\n    return inAmpMode ? children : <div id=\"__next\">{children}</div>\n  }\n\n  const ReactDOMServer = concurrentFeatures\n    ? require('react-dom/server.browser')\n    : require('react-dom/server')\n\n  /**\n   * Rules of Static & Dynamic HTML:\n   *\n   *    1.) We must generate static HTML unless the caller explicitly opts\n   *        in to dynamic HTML support.\n   *\n   *    2.) If dynamic HTML support is requested, we must honor that request\n   *        or throw an error. It is the sole responsibility of the caller to\n   *        ensure they aren't e.g. requesting dynamic HTML for an AMP page.\n   *\n   * These rules help ensure that other existing features like request caching,\n   * coalescing, and ISR continue working as intended.\n   */\n  const generateStaticHTML = supportsDynamicHTML !== true\n  const renderDocument = async () => {\n    if (!process.browser && Document.getInitialProps) {\n      const renderPage: RenderPage = (\n        options: ComponentsEnhancer = {}\n      ): RenderPageResult | Promise<RenderPageResult> => {\n        if (ctx.err && ErrorDebug) {\n          const html = ReactDOMServer.renderToString(\n            <Body>\n              <ErrorDebug error={ctx.err} />\n            </Body>\n          )\n          return { html, head }\n        }\n\n        if (dev && (props.router || props.Component)) {\n          throw new Error(\n            `'router' and 'Component' can not be returned in getInitialProps from _app.js https://nextjs.org/docs/messages/cant-override-next-props`\n          )\n        }\n\n        const { App: EnhancedApp, Component: EnhancedComponent } =\n          enhanceComponents(options, App, Component)\n\n        const html = ReactDOMServer.renderToString(\n          <Body>\n            <AppContainerWithIsomorphicFiberStructure>\n              <EnhancedApp\n                Component={EnhancedComponent}\n                router={router}\n                {...props}\n              />\n            </AppContainerWithIsomorphicFiberStructure>\n          </Body>\n        )\n        return { html, head }\n      }\n      const documentCtx = { ...ctx, renderPage }\n      const docProps: DocumentInitialProps = await loadGetInitialProps(\n        Document,\n        documentCtx\n      )\n      // the response might be finished on the getInitialProps call\n      if (isResSent(res) && !isSSG) return null\n\n      if (!docProps || typeof docProps.html !== 'string') {\n        const message = `\"${getDisplayName(\n          Document\n        )}.getInitialProps()\" should resolve to an object with a \"html\" prop set with a valid html string`\n        throw new Error(message)\n      }\n\n      return {\n        bodyResult: (suffix: string) =>\n          streamFromArray([docProps.html, suffix]),\n        documentElement: (htmlProps: HtmlProps) => (\n          <Document {...htmlProps} {...docProps} />\n        ),\n        head: docProps.head,\n        headTags: await headTags(documentCtx),\n        styles: docProps.styles,\n      }\n    } else {\n      let bodyResult\n\n      const renderContent = () => {\n        return ctx.err && ErrorDebug ? (\n          <Body>\n            <ErrorDebug error={ctx.err} />\n          </Body>\n        ) : (\n          <Body>\n            <AppContainerWithIsomorphicFiberStructure>\n              {renderOpts.serverComponents && (App as any).__next_rsc__ ? (\n                <Component {...props.pageProps} router={router} />\n              ) : (\n                <App {...props} Component={Component} router={router} />\n              )}\n            </AppContainerWithIsomorphicFiberStructure>\n          </Body>\n        )\n      }\n\n      if (concurrentFeatures) {\n        bodyResult = async (suffix: string) => {\n          // this must be called inside bodyResult so appWrappers is\n          // up to date when getWrappedApp is called\n\n          const content = renderContent()\n          return await renderToStream(\n            ReactDOMServer,\n            content,\n            suffix,\n            serverComponentsInlinedTransformStream?.readable ??\n              streamFromArray([]),\n            generateStaticHTML\n          )\n        }\n      } else {\n        const content = renderContent()\n        // for non-concurrent rendering we need to ensure App is rendered\n        // before _document so that updateHead is called/collected before\n        // rendering _document's head\n        const result = ReactDOMServer.renderToString(content)\n        bodyResult = (suffix: string) => streamFromArray([result, suffix])\n      }\n\n      return {\n        bodyResult,\n        documentElement: () => (Document as any)(),\n        head,\n        headTags: [],\n        styles: jsxStyleRegistry.styles(),\n      }\n    }\n  }\n\n  const documentResult = await renderDocument()\n  if (!documentResult) {\n    return null\n  }\n\n  const dynamicImportsIds = new Set<string | number>()\n  const dynamicImports = new Set<string>()\n\n  for (const mod of reactLoadableModules) {\n    const manifestItem: ManifestItem = reactLoadableManifest[mod]\n\n    if (manifestItem) {\n      dynamicImportsIds.add(manifestItem.id)\n      manifestItem.files.forEach((item) => {\n        dynamicImports.add(item)\n      })\n    }\n  }\n\n  const hybridAmp = ampState.hybrid\n  const docComponentsRendered: DocumentProps['docComponentsRendered'] = {}\n\n  const {\n    assetPrefix,\n    buildId,\n    customServer,\n    defaultLocale,\n    disableOptimizedLoading,\n    domainLocales,\n    locale,\n    locales,\n    runtimeConfig,\n  } = renderOpts\n  const htmlProps: HtmlProps = {\n    __NEXT_DATA__: {\n      props, // The result of getInitialProps\n      page: pathname, // The rendered page\n      query, // querystring parsed / passed by the user\n      buildId, // buildId is used to facilitate caching of page bundles, we send it to the client so that pageloader knows where to load bundles\n      assetPrefix: assetPrefix === '' ? undefined : assetPrefix, // send assetPrefix to the client side when configured, otherwise don't sent in the resulting HTML\n      runtimeConfig, // runtimeConfig if provided, otherwise don't sent in the resulting HTML\n      nextExport: nextExport === true ? true : undefined, // If this is a page exported by `next export`\n      autoExport: isAutoExport === true ? true : undefined, // If this is an auto exported page\n      isFallback,\n      dynamicIds:\n        dynamicImportsIds.size === 0\n          ? undefined\n          : Array.from(dynamicImportsIds),\n      err: renderOpts.err ? serializeError(dev, renderOpts.err) : undefined, // Error if one happened, otherwise don't sent in the resulting HTML\n      gsp: !!getStaticProps ? true : undefined, // whether the page is getStaticProps\n      gssp: !!getServerSideProps ? true : undefined, // whether the page is getServerSideProps\n      rsc: isServerComponent ? true : undefined, // whether the page is a server components page\n      customServer, // whether the user is using a custom server\n      gip: hasPageGetInitialProps ? true : undefined, // whether the page has getInitialProps\n      appGip: !defaultAppGetInitialProps ? true : undefined, // whether the _app has getInitialProps\n      locale,\n      locales,\n      defaultLocale,\n      domainLocales,\n      isPreview: isPreview === true ? true : undefined,\n    },\n    buildManifest: filteredBuildManifest,\n    docComponentsRendered,\n    dangerousAsPath: router.asPath,\n    canonicalBase:\n      !renderOpts.ampPath && getRequestMeta(req, '__nextStrippedLocale')\n        ? `${renderOpts.canonicalBase || ''}/${renderOpts.locale}`\n        : renderOpts.canonicalBase,\n    ampPath,\n    inAmpMode,\n    isDevelopment: !!dev,\n    hybridAmp,\n    dynamicImports: Array.from(dynamicImports),\n    assetPrefix,\n    // Only enabled in production as development mode has features relying on HMR (style injection for example)\n    unstable_runtimeJS:\n      process.env.NODE_ENV === 'production'\n        ? pageConfig.unstable_runtimeJS\n        : undefined,\n    unstable_JsPreload: pageConfig.unstable_JsPreload,\n    devOnlyCacheBusterQueryString,\n    scriptLoader,\n    locale,\n    disableOptimizedLoading,\n    head: documentResult.head,\n    headTags: documentResult.headTags,\n    styles: documentResult.styles,\n    useMaybeDeferContent,\n    crossOrigin: renderOpts.crossOrigin,\n    optimizeCss: renderOpts.optimizeCss,\n    optimizeFonts: renderOpts.optimizeFonts,\n    optimizeImages: renderOpts.optimizeImages,\n    concurrentFeatures: renderOpts.concurrentFeatures,\n  }\n\n  const document = (\n    <AmpStateContext.Provider value={ampState}>\n      <HtmlContext.Provider value={htmlProps}>\n        {documentResult.documentElement(htmlProps)}\n      </HtmlContext.Provider>\n    </AmpStateContext.Provider>\n  )\n\n  let documentHTML: string\n  if (concurrentFeatures) {\n    const documentStream = await renderToStream(\n      ReactDOMServer,\n      document,\n      null,\n      streamFromArray([]),\n      true\n    )\n    documentHTML = await streamToString(documentStream)\n  } else {\n    documentHTML = ReactDOMServer.renderToStaticMarkup(document)\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const nonRenderedComponents = []\n    const expectedDocComponents = ['Main', 'Head', 'NextScript', 'Html']\n\n    for (const comp of expectedDocComponents) {\n      if (!(docComponentsRendered as any)[comp]) {\n        nonRenderedComponents.push(comp)\n      }\n    }\n\n    if (nonRenderedComponents.length) {\n      const missingComponentList = nonRenderedComponents\n        .map((e) => `<${e} />`)\n        .join(', ')\n      const plural = nonRenderedComponents.length !== 1 ? 's' : ''\n      console.warn(\n        `Your custom Document (pages/_document) did not render all the required subcomponent${plural}.\\n` +\n          `Missing component${plural}: ${missingComponentList}\\n` +\n          'Read how to fix here: https://nextjs.org/docs/messages/missing-document-component'\n      )\n    }\n  }\n\n  const [renderTargetPrefix, renderTargetSuffix] = documentHTML.split(\n    '<next-js-internal-body-render-target></next-js-internal-body-render-target>'\n  )\n\n  const prefix: Array<string> = []\n  if (!documentHTML.startsWith(DOCTYPE)) {\n    prefix.push(DOCTYPE)\n  }\n  prefix.push(renderTargetPrefix)\n  if (inAmpMode) {\n    prefix.push('<!-- __NEXT_DATA__ -->')\n  }\n\n  let streams: Array<ReadableStream> = [\n    streamFromArray(prefix),\n    await documentResult.bodyResult(renderTargetSuffix),\n  ]\n\n  const postProcessors: Array<((html: string) => Promise<string>) | null> = (\n    generateStaticHTML\n      ? [\n          inAmpMode\n            ? async (html: string) => {\n                html = await optimizeAmp(html, renderOpts.ampOptimizerConfig)\n                if (!renderOpts.ampSkipValidation && renderOpts.ampValidator) {\n                  await renderOpts.ampValidator(html, pathname)\n                }\n                return html\n              }\n            : null,\n          !process.browser &&\n          (process.env.__NEXT_OPTIMIZE_FONTS ||\n            process.env.__NEXT_OPTIMIZE_IMAGES)\n            ? async (html: string) => {\n                return await postProcess(\n                  html,\n                  { getFontDefinition },\n                  {\n                    optimizeFonts: renderOpts.optimizeFonts,\n                    optimizeImages: renderOpts.optimizeImages,\n                  }\n                )\n              }\n            : null,\n          !process.browser && renderOpts.optimizeCss\n            ? async (html: string) => {\n                // eslint-disable-next-line import/no-extraneous-dependencies\n                const Critters = require('critters')\n                const cssOptimizer = new Critters({\n                  ssrMode: true,\n                  reduceInlineStyles: false,\n                  path: renderOpts.distDir,\n                  publicPath: `${renderOpts.assetPrefix}/_next/`,\n                  preload: 'media',\n                  fonts: false,\n                  ...renderOpts.optimizeCss,\n                })\n                return await cssOptimizer.process(html)\n              }\n            : null,\n          inAmpMode || hybridAmp\n            ? async (html: string) => {\n                return html.replace(/&amp;amp=1/g, '&amp=1')\n              }\n            : null,\n        ]\n      : []\n  ).filter(Boolean)\n\n  if (generateStaticHTML || postProcessors.length > 0) {\n    let html = await streamToString(chainStreams(streams))\n    for (const postProcessor of postProcessors) {\n      if (postProcessor) {\n        html = await postProcessor(html)\n      }\n    }\n    return new RenderResult(html)\n  }\n\n  return new RenderResult(chainStreams(streams))\n}\n\nfunction errorToJSON(err: Error) {\n  return {\n    name: err.name,\n    message: err.message,\n    stack: err.stack,\n    middleware: (err as any).middleware,\n  }\n}\n\nfunction serializeError(\n  dev: boolean | undefined,\n  err: Error\n): Error & { statusCode?: number } {\n  if (dev) {\n    return errorToJSON(err)\n  }\n\n  return {\n    name: 'Internal Server Error.',\n    message: '500 - Internal Server Error.',\n    statusCode: 500,\n  }\n}\n\nfunction createTransformStream({\n  flush,\n  transform,\n}: {\n  flush?: (controller: TransformStreamDefaultController) => Promise<void> | void\n  transform?: (\n    chunk: Uint8Array,\n    controller: TransformStreamDefaultController\n  ) => void\n}): TransformStream {\n  const source = new TransformStream()\n  const sink = new TransformStream()\n  const reader = source.readable.getReader()\n  const writer = sink.writable.getWriter()\n\n  const controller = {\n    enqueue(chunk: Uint8Array) {\n      writer.write(chunk)\n    },\n\n    error(reason: Error) {\n      writer.abort(reason)\n      reader.cancel()\n    },\n\n    terminate() {\n      writer.close()\n      reader.cancel()\n    },\n\n    get desiredSize() {\n      return writer.desiredSize\n    },\n  }\n\n  ;(async () => {\n    try {\n      while (true) {\n        const { done, value } = await reader.read()\n\n        if (done) {\n          const maybePromise = flush?.(controller)\n          if (maybePromise) {\n            await maybePromise\n          }\n          writer.close()\n          return\n        }\n\n        if (transform) {\n          transform(value, controller)\n        } else {\n          controller.enqueue(value)\n        }\n      }\n    } catch (err) {\n      writer.abort(err)\n    }\n  })()\n\n  return {\n    readable: sink.readable,\n    writable: source.writable,\n  }\n}\n\nfunction createBufferedTransformStream(): TransformStream {\n  const decoder = new TextDecoder()\n  const encoder = new TextEncoder()\n\n  let bufferedString = ''\n  let pendingFlush: Promise<void> | null = null\n\n  const flushBuffer = (controller: TransformStreamDefaultController) => {\n    if (!pendingFlush) {\n      pendingFlush = new Promise((resolve) => {\n        setTimeout(() => {\n          controller.enqueue(encoder.encode(bufferedString))\n          bufferedString = ''\n          pendingFlush = null\n          resolve()\n        }, 0)\n      })\n    }\n    return pendingFlush\n  }\n\n  return createTransformStream({\n    transform(chunk, controller) {\n      bufferedString += decoder.decode(chunk)\n      flushBuffer(controller)\n    },\n\n    flush() {\n      if (pendingFlush) {\n        return pendingFlush\n      }\n    },\n  })\n}\n\nfunction renderToStream(\n  ReactDOMServer: typeof import('react-dom/server'),\n  element: React.ReactElement,\n  suffix: string | null,\n  dataStream: ReadableStream,\n  generateStaticHTML: boolean\n): Promise<ReadableStream> {\n  return new Promise((resolve, reject) => {\n    let resolved = false\n\n    const closeTagString = '</body></html>'\n    const encoder = new TextEncoder()\n    const suffixState = suffix\n      ? {\n          closeTag: encoder.encode(closeTagString),\n          suffixUnclosed: encoder.encode(suffix.split(closeTagString)[0]),\n        }\n      : null\n\n    const doResolve = () => {\n      if (!resolved) {\n        resolved = true\n\n        // React will call our callbacks synchronously, so we need to\n        // defer to a microtask to ensure `stream` is set.\n        Promise.resolve().then(() =>\n          resolve(\n            stream\n              .pipeThrough(createBufferedTransformStream())\n              .pipeThrough(\n                createInlineDataStream(\n                  dataStream.pipeThrough(\n                    createPrefixStream(suffixState?.suffixUnclosed ?? null)\n                  )\n                )\n              )\n              .pipeThrough(createSuffixStream(suffixState?.closeTag ?? null))\n          )\n        )\n      }\n    }\n\n    const stream: ReadableStream = (\n      ReactDOMServer as any\n    ).renderToReadableStream(element, {\n      onError(err: Error) {\n        if (!resolved) {\n          resolved = true\n          reject(err)\n        }\n      },\n      onCompleteShell() {\n        if (!generateStaticHTML) {\n          doResolve()\n        }\n      },\n      onCompleteAll() {\n        doResolve()\n      },\n    })\n  })\n}\n\nfunction createSuffixStream(suffix: Uint8Array | null) {\n  return createTransformStream({\n    flush(controller) {\n      if (suffix) {\n        controller.enqueue(suffix)\n      }\n    },\n  })\n}\n\nfunction createPrefixStream(prefix: Uint8Array | null) {\n  let prefixFlushed = false\n  return createTransformStream({\n    transform(chunk, controller) {\n      if (!prefixFlushed && prefix) {\n        prefixFlushed = true\n        controller.enqueue(prefix)\n      }\n      controller.enqueue(chunk)\n    },\n    flush(controller) {\n      if (!prefixFlushed && prefix) {\n        prefixFlushed = true\n        controller.enqueue(prefix)\n      }\n    },\n  })\n}\n\nfunction createInlineDataStream(\n  dataStream: ReadableStream | null\n): TransformStream {\n  let dataStreamFinished: Promise<void> | null = null\n  return createTransformStream({\n    transform(chunk, controller) {\n      controller.enqueue(chunk)\n\n      if (!dataStreamFinished && dataStream) {\n        const dataStreamReader = dataStream.getReader()\n        dataStreamFinished = (async () => {\n          try {\n            while (true) {\n              const { done, value } = await dataStreamReader.read()\n              if (done) {\n                return\n              }\n              controller.enqueue(value)\n            }\n          } catch (err) {\n            controller.error(err)\n          }\n        })()\n      }\n    },\n    flush() {\n      if (dataStreamFinished) {\n        return dataStreamFinished\n      }\n    },\n  })\n}\n\nfunction chainStreams(streams: ReadableStream[]): ReadableStream {\n  const { readable, writable } = new TransformStream()\n\n  let promise = Promise.resolve()\n  for (let i = 0; i < streams.length; ++i) {\n    promise = promise.then(() =>\n      streams[i].pipeTo(writable, {\n        preventClose: i + 1 < streams.length,\n      })\n    )\n  }\n\n  return readable\n}\n\nfunction streamFromArray(strings: string[]): ReadableStream {\n  const encoder = new TextEncoder()\n  const chunks = Array.from(strings.map((str) => encoder.encode(str)))\n\n  return new ReadableStream({\n    start(controller) {\n      chunks.forEach((chunk) => controller.enqueue(chunk))\n      controller.close()\n    },\n  })\n}\n\nasync function streamToString(stream: ReadableStream): Promise<string> {\n  const reader = stream.getReader()\n  const decoder = new TextDecoder()\n\n  let bufferedString = ''\n\n  while (true) {\n    const { done, value } = await reader.read()\n\n    if (done) {\n      return bufferedString\n    }\n\n    bufferedString += decoder.decode(value)\n  }\n}\n\nexport function useMaybeDeferContent(\n  _name: string,\n  contentFn: () => JSX.Element\n): [boolean, JSX.Element] {\n  return [false, contentFn()]\n}\n"],"names":["renderToHTML","useMaybeDeferContent","optimizeAmp","getFontDefinitionFromManifest","tryGetPreviewData","warn","postProcess","DOCTYPE","process","browser","require","default","console","bind","noRouter","message","Error","ServerRouter","pathname","query","as","isFallback","isReady","basePath","locale","locales","defaultLocale","domainLocales","isPreview","isLocaleDomain","route","replace","asPath","push","reload","back","prefetch","beforePopState","enhanceComponents","options","App","Component","enhanceApp","enhanceComponent","renderFlight","props","AppServer","__next_rsc__","Fragment","invalidKeysMsg","methodName","invalidKeys","join","checkRedirectValues","redirect","req","method","destination","permanent","statusCode","errors","hasStatusCode","hasPermanent","has","destinationType","basePathType","length","url","rscCache","Map","createRSCHook","decoder","TextDecoder","encoder","TextEncoder","writable","id","bootstrap","entry","get","renderStream","forwardStream","set","bootstrapped","forwardReader","getReader","writer","getWriter","read","then","done","value","write","encode","JSON","stringify","delete","close","decode","useRSCResponse","createServerComponentRenderer","cachePrefix","transformStream","OriginalComponent","serverComponentManifest","ServerComponentWrapper","useId","reqStream","response","root","readRoot","Suspense","fallback","res","renderOpts","devOnlyCacheBusterQueryString","dev","Date","now","Object","assign","err","ampPath","Document","pageConfig","buildManifest","fontManifest","reactLoadableManifest","ErrorDebug","getStaticProps","getStaticPaths","getServerSideProps","renderServerComponentData","serverComponentProps","isDataReq","params","previewProps","supportsDynamicHTML","concurrentFeatures","isServerComponent","serverComponentsInlinedTransformStream","TransformStream","search","getFontDefinition","callMiddleware","args","results","middlewareFunc","curResults","result","headTags","__nextFallback","__nextLocale","__nextDefaultLocale","isSSG","isBuildTimeSSG","nextExport","defaultAppGetInitialProps","getInitialProps","origGetInitialProps","hasPageGetInitialProps","pageIsDynamic","isAutoExport","resolvedAsPath","isValidElementType","amp","endsWith","includes","preloadAll","previewData","routerIsReady","router","jsxStyleRegistry","ctx","undefined","AppTree","AppContainerWithIsomorphicFiberStructure","defaultGetInitialProps","docCtx","AppComp","html","head","renderPage","styles","nonce","ampState","ampFirst","hasQuery","Boolean","hybrid","inAmpMode","reactLoadableModules","scriptLoader","AppContainer","children","Provider","updateHead","state","updateScripts","scripts","mountedInstances","Set","moduleName","registry","Noop","__N_PREVIEW","data","preview","staticPropsError","code","keys","filter","key","env","NODE_ENV","notFound","isNotFound","__N_REDIRECT","__N_REDIRECT_STATUS","__N_REDIRECT_BASE_PATH","isRedirect","revalidate","Number","isInteger","Math","ceil","pageProps","pageData","canAccessRes","resOrProxy","deferredContent","Proxy","obj","prop","receiver","Reflect","resolvedUrl","serverSidePropsError","Promise","unstable_notFound","unstable_redirect","fromStatic","stream","pipeThrough","createBufferedTransformStream","filteredBuildManifest","page","pages","lowPriorityFiles","f","Body","div","ReactDOMServer","generateStaticHTML","renderDocument","renderToString","error","EnhancedApp","EnhancedComponent","documentCtx","docProps","bodyResult","suffix","streamFromArray","documentElement","htmlProps","renderContent","serverComponents","content","renderToStream","readable","documentResult","dynamicImportsIds","dynamicImports","mod","manifestItem","add","files","forEach","item","hybridAmp","docComponentsRendered","assetPrefix","buildId","customServer","disableOptimizedLoading","runtimeConfig","__NEXT_DATA__","autoExport","dynamicIds","size","Array","from","serializeError","gsp","gssp","rsc","gip","appGip","dangerousAsPath","canonicalBase","isDevelopment","unstable_runtimeJS","unstable_JsPreload","crossOrigin","optimizeCss","optimizeFonts","optimizeImages","document","documentHTML","documentStream","streamToString","renderToStaticMarkup","nonRenderedComponents","expectedDocComponents","comp","missingComponentList","map","e","plural","renderTargetPrefix","renderTargetSuffix","split","prefix","startsWith","streams","postProcessors","ampOptimizerConfig","ampSkipValidation","ampValidator","__NEXT_OPTIMIZE_FONTS","__NEXT_OPTIMIZE_IMAGES","Critters","cssOptimizer","ssrMode","reduceInlineStyles","path","distDir","publicPath","preload","fonts","chainStreams","postProcessor","errorToJSON","name","stack","middleware","createTransformStream","flush","transform","source","sink","reader","controller","enqueue","chunk","reason","abort","cancel","terminate","desiredSize","maybePromise","bufferedString","pendingFlush","flushBuffer","resolve","setTimeout","element","dataStream","reject","resolved","closeTagString","suffixState","closeTag","suffixUnclosed","doResolve","createInlineDataStream","createPrefixStream","createSuffixStream","renderToReadableStream","onError","onCompleteShell","onCompleteAll","prefixFlushed","dataStreamFinished","dataStreamReader","promise","i","pipeTo","preventClose","strings","chunks","str","ReadableStream","start","_name","contentFn"],"mappings":"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"}