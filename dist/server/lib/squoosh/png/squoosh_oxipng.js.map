{"version":3,"sources":["../../../../../server/lib/squoosh/png/squoosh_oxipng.js"],"sourcesContent":["let wasm\n\nlet cachedTextDecoder = new TextDecoder('utf-8', {\n  ignoreBOM: true,\n  fatal: true,\n})\n\ncachedTextDecoder.decode()\n\nlet cachegetUint8Memory0 = null\nfunction getUint8Memory0() {\n  if (\n    cachegetUint8Memory0 === null ||\n    cachegetUint8Memory0.buffer !== wasm.memory.buffer\n  ) {\n    cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer)\n  }\n  return cachegetUint8Memory0\n}\n\nfunction getStringFromWasm0(ptr, len) {\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len))\n}\n\nlet WASM_VECTOR_LEN = 0\n\nfunction passArray8ToWasm0(arg, malloc) {\n  const ptr = malloc(arg.length * 1)\n  getUint8Memory0().set(arg, ptr / 1)\n  WASM_VECTOR_LEN = arg.length\n  return ptr\n}\n\nlet cachegetInt32Memory0 = null\nfunction getInt32Memory0() {\n  if (\n    cachegetInt32Memory0 === null ||\n    cachegetInt32Memory0.buffer !== wasm.memory.buffer\n  ) {\n    cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer)\n  }\n  return cachegetInt32Memory0\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len)\n}\n/**\n * @param {Uint8Array} data\n * @param {number} level\n * @param {boolean} interlace\n * @returns {Uint8Array}\n */\nexport function optimise(data, level, interlace) {\n  try {\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16)\n    var ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc)\n    var len0 = WASM_VECTOR_LEN\n    wasm.optimise(retptr, ptr0, len0, level, interlace)\n    var r0 = getInt32Memory0()[retptr / 4 + 0]\n    var r1 = getInt32Memory0()[retptr / 4 + 1]\n    var v1 = getArrayU8FromWasm0(r0, r1).slice()\n    wasm.__wbindgen_free(r0, r1 * 1)\n    return v1\n  } finally {\n    wasm.__wbindgen_add_to_stack_pointer(16)\n  }\n}\n\nasync function load(module, imports) {\n  if (typeof Response === 'function' && module instanceof Response) {\n    if (typeof WebAssembly.instantiateStreaming === 'function') {\n      return await WebAssembly.instantiateStreaming(module, imports)\n    }\n\n    const bytes = await module.arrayBuffer()\n    return await WebAssembly.instantiate(bytes, imports)\n  } else {\n    const instance = await WebAssembly.instantiate(module, imports)\n\n    if (instance instanceof WebAssembly.Instance) {\n      return { instance, module }\n    } else {\n      return instance\n    }\n  }\n}\n\nasync function init(input) {\n  const imports = {}\n  imports.wbg = {}\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1))\n  }\n\n  if (\n    typeof input === 'string' ||\n    (typeof Request === 'function' && input instanceof Request) ||\n    (typeof URL === 'function' && input instanceof URL)\n  ) {\n    input = fetch(input)\n  }\n\n  const { instance, module } = await load(await input, imports)\n\n  wasm = instance.exports\n  init.__wbindgen_wasm_module = module\n\n  return wasm\n}\n\nexport default init\n\n// Manually remove the wasm and memory references to trigger GC\nexport function cleanup() {\n  wasm = null\n  cachegetUint8Memory0 = null\n  cachegetInt32Memory0 = null\n}\n"],"names":["optimise","cleanup","wasm","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","memory","Uint8Array","getStringFromWasm0","ptr","len","subarray","WASM_VECTOR_LEN","passArray8ToWasm0","arg","malloc","length","set","cachegetInt32Memory0","getInt32Memory0","Int32Array","getArrayU8FromWasm0","data","level","interlace","retptr","__wbindgen_add_to_stack_pointer","ptr0","__wbindgen_malloc","len0","r0","r1","v1","slice","__wbindgen_free","load","module","imports","Response","WebAssembly","instantiateStreaming","bytes","arrayBuffer","instantiate","instance","Instance","init","input","wbg","__wbindgen_throw","arg0","arg1","Error","Request","URL","fetch","exports","__wbindgen_wasm_module"],"mappings":"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"}