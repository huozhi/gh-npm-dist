{"version":3,"sources":["../../../server/api-utils/node.ts"],"names":["tryGetPreviewData","parseBody","apiResolver","req","res","options","SYMBOL_PREVIEW_DATA","getCookies","getCookieParser","headers","cookies","hasBypass","COOKIE_NAME_PRERENDER_BYPASS","hasData","COOKIE_NAME_PRERENDER_DATA","clearPreviewData","previewModeId","tokenPreviewData","encryptedPreviewData","jsonwebtoken","verify","previewModeSigningKey","decryptedPreviewData","decryptWithSecret","Buffer","from","previewModeEncryptionKey","data","JSON","parse","Object","defineProperty","value","enumerable","limit","contentType","type","parameters","encoding","charset","buffer","getRawBody","require","e","isError","ApiError","body","toString","parseJson","qs","decode","query","resolverModule","apiContext","propagateError","dev","page","apiReq","apiRes","config","statusCode","end","bodyParser","api","responseLimit","externalResolver","setLazyProp","previewData","undefined","sizeLimit","contentLength","maxContentLength","getMaxContentLength","writeData","write","endResponse","args","byteLength","apply","length","console","warn","url","bytes","format","status","sendStatusCode","send","sendData","json","sendJson","redirect","statusOrUrl","setPreviewData","assign","unstable_revalidate","urlPath","resolver","interopDefault","wasPiped","process","env","NODE_ENV","once","isResSent","err","sendError","message","error","context","trustHostHeader","hostname","port","Error","startsWith","baseUrl","host","extraHeaders","cookie","fetch","PRERENDER_REVALIDATE_HEADER","cacheHeader","get","toUpperCase","str","removeHeader","getHeader","Stream","setHeader","pipe","isJSONLike","includes","stringifiedBody","stringify","etag","generateETag","sendEtagResponse","isBuffer","jsonBody","isNotValidData","payload","sign","encryptWithSecret","algorithm","maxAge","expiresIn","serialize","previous","Array","isArray","httpOnly","sameSite","secure","path","RESPONSE_LIMIT_DEFAULT"],"mappings":"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"}