{"version":3,"sources":["../../../server/dev/next-dev-server.ts"],"sourcesContent":["import type { __ApiPreviewProps } from '../api-utils'\nimport type { CustomRoutes } from '../../lib/load-custom-routes'\nimport type { FetchEventResult } from '../web/types'\nimport type { FindComponentsResult } from '../next-server'\nimport type { LoadComponentsReturnType } from '../load-components'\nimport type { Options as ServerOptions } from '../next-server'\nimport type { Params } from '../router'\nimport type { ParsedNextUrl } from '../../shared/lib/router/utils/parse-next-url'\nimport type { ParsedUrlQuery } from 'querystring'\nimport type { Server as HTTPServer } from 'http'\nimport type { UrlWithParsedQuery } from 'url'\n\nimport crypto from 'crypto'\nimport fs from 'fs'\nimport chalk from 'next/dist/compiled/chalk'\nimport { Worker } from 'next/dist/compiled/jest-worker'\nimport AmpHtmlValidator from 'next/dist/compiled/amphtml-validator'\nimport findUp from 'next/dist/compiled/find-up'\nimport { join as pathJoin, relative, resolve as pathResolve, sep } from 'path'\nimport React from 'react'\nimport Watchpack from 'next/dist/compiled/watchpack'\nimport { ampValidation } from '../../build/output'\nimport { PUBLIC_DIR_MIDDLEWARE_CONFLICT } from '../../lib/constants'\nimport { fileExists } from '../../lib/file-exists'\nimport { findPagesDir } from '../../lib/find-pages-dir'\nimport loadCustomRoutes from '../../lib/load-custom-routes'\nimport { verifyTypeScriptSetup } from '../../lib/verifyTypeScriptSetup'\nimport {\n  PHASE_DEVELOPMENT_SERVER,\n  CLIENT_STATIC_FILES_PATH,\n  DEV_CLIENT_PAGES_MANIFEST,\n  DEV_MIDDLEWARE_MANIFEST,\n} from '../../shared/lib/constants'\nimport {\n  getRouteMatcher,\n  getRouteRegex,\n  getSortedRoutes,\n  isDynamicRoute,\n} from '../../shared/lib/router/utils'\nimport Server, { WrappedBuildError } from '../next-server'\nimport { normalizePagePath } from '../normalize-page-path'\nimport Router, { hasBasePath, replaceBasePath, route } from '../router'\nimport { eventCliSession } from '../../telemetry/events'\nimport { Telemetry } from '../../telemetry/storage'\nimport { setGlobal } from '../../trace'\nimport HotReloader from './hot-reloader'\nimport { findPageFile } from '../lib/find-page-file'\nimport { getNodeOptionsWithoutInspect } from '../lib/utils'\nimport { withCoalescedInvoke } from '../../lib/coalesced-function'\nimport { loadDefaultErrorComponents } from '../load-components'\nimport { DecodeError } from '../../shared/lib/utils'\nimport {\n  createOriginalStackFrame,\n  getSourceById,\n  parseStack,\n} from 'next/dist/compiled/@next/react-dev-overlay/middleware'\nimport * as Log from '../../build/output/log'\nimport isError, { getProperError } from '../../lib/is-error'\nimport { getMiddlewareRegex } from '../../shared/lib/router/utils/get-middleware-regex'\nimport { isCustomErrorPage, isReservedPage } from '../../build/utils'\nimport {\n  BaseNextRequest,\n  BaseNextResponse,\n  NodeNextResponse,\n  NodeNextRequest,\n} from '../base-http'\n\n// Load ReactDevOverlay only when needed\nlet ReactDevOverlayImpl: React.FunctionComponent\nconst ReactDevOverlay = (props: any) => {\n  if (ReactDevOverlayImpl === undefined) {\n    ReactDevOverlayImpl =\n      require('next/dist/compiled/@next/react-dev-overlay/client').ReactDevOverlay\n  }\n  return ReactDevOverlayImpl(props)\n}\n\nexport interface Options extends ServerOptions {\n  /**\n   * The HTTP Server that Next.js is running behind\n   */\n  httpServer?: HTTPServer\n  /**\n   * Tells of Next.js is running from the `next dev` command\n   */\n  isNextDevCommand?: boolean\n}\n\nexport default class DevServer extends Server {\n  private devReady: Promise<void>\n  private setDevReady?: Function\n  private webpackWatcher?: Watchpack | null\n  private hotReloader?: HotReloader\n  private isCustomServer: boolean\n  protected sortedRoutes?: string[]\n  private addedUpgradeListener = false\n\n  protected staticPathsWorker?: { [key: string]: any } & {\n    loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths\n  }\n\n  private getStaticPathsWorker(): { [key: string]: any } & {\n    loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths\n  } {\n    if (this.staticPathsWorker) {\n      return this.staticPathsWorker\n    }\n    this.staticPathsWorker = new Worker(\n      require.resolve('./static-paths-worker'),\n      {\n        maxRetries: 1,\n        numWorkers: this.nextConfig.experimental.cpus,\n        enableWorkerThreads: this.nextConfig.experimental.workerThreads,\n        forkOptions: {\n          env: {\n            ...process.env,\n            // discard --inspect/--inspect-brk flags from process.env.NODE_OPTIONS. Otherwise multiple Node.js debuggers\n            // would be started if user launch Next.js in debugging mode. The number of debuggers is linked to\n            // the number of workers Next.js tries to launch. The only worker users are interested in debugging\n            // is the main Next.js one\n            NODE_OPTIONS: getNodeOptionsWithoutInspect(),\n          },\n        },\n      }\n    ) as Worker & {\n      loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths\n    }\n\n    this.staticPathsWorker.getStdout().pipe(process.stdout)\n    this.staticPathsWorker.getStderr().pipe(process.stderr)\n\n    return this.staticPathsWorker\n  }\n\n  constructor(options: Options) {\n    super({ ...options, dev: true })\n    this.renderOpts.dev = true\n    ;(this.renderOpts as any).ErrorDebug = ReactDevOverlay\n    this.devReady = new Promise((resolve) => {\n      this.setDevReady = resolve\n    })\n    ;(this.renderOpts as any).ampSkipValidation =\n      this.nextConfig.experimental?.amp?.skipValidation ?? false\n    ;(this.renderOpts as any).ampValidator = (\n      html: string,\n      pathname: string\n    ) => {\n      const validatorPath =\n        this.nextConfig.experimental &&\n        this.nextConfig.experimental.amp &&\n        this.nextConfig.experimental.amp.validator\n      return AmpHtmlValidator.getInstance(validatorPath).then((validator) => {\n        const result = validator.validateString(html)\n        ampValidation(\n          pathname,\n          result.errors\n            .filter((e) => e.severity === 'ERROR')\n            .filter((e) => this._filterAmpDevelopmentScript(html, e)),\n          result.errors.filter((e) => e.severity !== 'ERROR')\n        )\n      })\n    }\n    if (fs.existsSync(pathJoin(this.dir, 'static'))) {\n      console.warn(\n        `The static directory has been deprecated in favor of the public directory. https://nextjs.org/docs/messages/static-dir-deprecated`\n      )\n    }\n\n    // setup upgrade listener eagerly when we can otherwise\n    // it will be done on the first request via req.socket.server\n    if (options.httpServer) {\n      this.setupWebSocketHandler(options.httpServer)\n    }\n\n    this.isCustomServer = !options.isNextDevCommand\n    this.pagesDir = findPagesDir(this.dir)\n  }\n\n  protected getBuildId(): string {\n    return 'development'\n  }\n\n  async addExportPathMapRoutes() {\n    // Makes `next export` exportPathMap work in development mode.\n    // So that the user doesn't have to define a custom server reading the exportPathMap\n    if (this.nextConfig.exportPathMap) {\n      console.log('Defining routes from exportPathMap')\n      const exportPathMap = await this.nextConfig.exportPathMap(\n        {},\n        {\n          dev: true,\n          dir: this.dir,\n          outDir: null,\n          distDir: this.distDir,\n          buildId: this.buildId,\n        }\n      ) // In development we can't give a default path mapping\n      for (const path in exportPathMap) {\n        const { page, query = {} } = exportPathMap[path]\n\n        // We use unshift so that we're sure the routes is defined before Next's default routes\n        this.router.addFsRoute({\n          match: route(path),\n          type: 'route',\n          name: `${path} exportpathmap route`,\n          fn: async (req, res, _params, parsedUrl) => {\n            const { query: urlQuery } = parsedUrl\n\n            Object.keys(urlQuery)\n              .filter((key) => query[key] === undefined)\n              .forEach((key) =>\n                console.warn(\n                  `Url '${path}' defines a query parameter '${key}' that is missing in exportPathMap`\n                )\n              )\n\n            const mergedQuery = { ...urlQuery, ...query }\n\n            await this.render(req, res, page, mergedQuery, parsedUrl, true)\n            return {\n              finished: true,\n            }\n          },\n        })\n      }\n    }\n  }\n\n  async startWatcher(): Promise<void> {\n    if (this.webpackWatcher) {\n      return\n    }\n\n    const regexMiddleware = new RegExp(\n      `[\\\\\\\\/](_middleware.(?:${this.nextConfig.pageExtensions.join('|')}))$`\n    )\n\n    const regexPageExtension = new RegExp(\n      `\\\\.+(?:${this.nextConfig.pageExtensions.join('|')})$`\n    )\n\n    let resolved = false\n    return new Promise((resolve, reject) => {\n      const pagesDir = this.pagesDir\n\n      // Watchpack doesn't emit an event for an empty directory\n      fs.readdir(pagesDir!, (_, files) => {\n        if (files?.length) {\n          return\n        }\n\n        if (!resolved) {\n          resolve()\n          resolved = true\n        }\n      })\n\n      let wp = (this.webpackWatcher = new Watchpack())\n      wp.watch([], [pagesDir!], 0)\n\n      wp.on('aggregated', () => {\n        const routedMiddleware = []\n        const routedPages = []\n        const knownFiles = wp.getTimeInfoEntries()\n        const ssrMiddleware = new Set<string>()\n        const isWebServerRuntime =\n          this.nextConfig.experimental.concurrentFeatures\n        const hasServerComponents =\n          isWebServerRuntime && this.nextConfig.experimental.serverComponents\n\n        for (const [fileName, { accuracy }] of knownFiles) {\n          if (accuracy === undefined || !regexPageExtension.test(fileName)) {\n            continue\n          }\n\n          if (regexMiddleware.test(fileName)) {\n            routedMiddleware.push(\n              `/${relative(pagesDir!, fileName).replace(/\\\\+/g, '/')}`\n                .replace(/^\\/+/g, '/')\n                .replace(regexMiddleware, '/')\n            )\n            continue\n          }\n\n          let pageName =\n            '/' + relative(pagesDir!, fileName).replace(/\\\\+/g, '/')\n          pageName = pageName.replace(regexPageExtension, '')\n          pageName = pageName.replace(/\\/index$/, '') || '/'\n\n          if (hasServerComponents && pageName.endsWith('.server')) {\n            routedMiddleware.push(pageName)\n            ssrMiddleware.add(pageName)\n          } else if (\n            isWebServerRuntime &&\n            !(isReservedPage(pageName) || isCustomErrorPage(pageName))\n          ) {\n            routedMiddleware.push(pageName)\n            ssrMiddleware.add(pageName)\n          }\n\n          routedPages.push(pageName)\n        }\n\n        this.middleware = getSortedRoutes(routedMiddleware).map((page) => ({\n          match: getRouteMatcher(\n            getMiddlewareRegex(page, !ssrMiddleware.has(page))\n          ),\n          page,\n          ssr: ssrMiddleware.has(page),\n        }))\n\n        try {\n          // we serve a separate manifest with all pages for the client in\n          // dev mode so that we can match a page after a rewrite on the client\n          // before it has been built and is populated in the _buildManifest\n          const sortedRoutes = getSortedRoutes(routedPages)\n\n          if (\n            !this.sortedRoutes?.every((val, idx) => val === sortedRoutes[idx])\n          ) {\n            // emit the change so clients fetch the update\n            this.hotReloader!.send(undefined, { devPagesManifest: true })\n          }\n          this.sortedRoutes = sortedRoutes\n\n          this.dynamicRoutes = this.sortedRoutes\n            .filter(isDynamicRoute)\n            .map((page) => ({\n              page,\n              match: getRouteMatcher(getRouteRegex(page)),\n            }))\n\n          this.router.setDynamicRoutes(this.dynamicRoutes)\n\n          if (!resolved) {\n            resolve()\n            resolved = true\n          }\n        } catch (e) {\n          if (!resolved) {\n            reject(e)\n            resolved = true\n          } else {\n            console.warn('Failed to reload dynamic routes:', e)\n          }\n        }\n      })\n    })\n  }\n\n  async stopWatcher(): Promise<void> {\n    if (!this.webpackWatcher) {\n      return\n    }\n\n    this.webpackWatcher.close()\n    this.webpackWatcher = null\n  }\n\n  async prepare(): Promise<void> {\n    setGlobal('distDir', this.distDir)\n    setGlobal('phase', PHASE_DEVELOPMENT_SERVER)\n    await verifyTypeScriptSetup(\n      this.dir,\n      this.pagesDir!,\n      false,\n      this.nextConfig\n    )\n\n    this.customRoutes = await loadCustomRoutes(this.nextConfig)\n\n    // reload router\n    const { redirects, rewrites, headers } = this.customRoutes\n\n    if (\n      rewrites.beforeFiles.length ||\n      rewrites.afterFiles.length ||\n      rewrites.fallback.length ||\n      redirects.length ||\n      headers.length\n    ) {\n      this.router = new Router(this.generateRoutes())\n    }\n\n    this.hotReloader = new HotReloader(this.dir, {\n      pagesDir: this.pagesDir!,\n      config: this.nextConfig,\n      previewProps: this.getPreviewProps(),\n      buildId: this.buildId,\n      rewrites,\n    })\n    await super.prepare()\n    await this.addExportPathMapRoutes()\n    await this.hotReloader.start()\n    await this.startWatcher()\n    this.setDevReady!()\n\n    const telemetry = new Telemetry({ distDir: this.distDir })\n    telemetry.record(\n      eventCliSession(this.distDir, this.nextConfig, {\n        webpackVersion: 5,\n        cliCommand: 'dev',\n        isSrcDir: relative(this.dir, this.pagesDir!).startsWith('src'),\n        hasNowJson: !!(await findUp('now.json', { cwd: this.dir })),\n        isCustomServer: this.isCustomServer,\n      })\n    )\n    // This is required by the tracing subsystem.\n    setGlobal('telemetry', telemetry)\n\n    process.on('unhandledRejection', (reason) => {\n      this.logErrorWithOriginalStack(reason, 'unhandledRejection').catch(\n        () => {}\n      )\n    })\n    process.on('uncaughtException', (err) => {\n      this.logErrorWithOriginalStack(err, 'uncaughtException').catch(() => {})\n    })\n  }\n\n  protected async close(): Promise<void> {\n    await this.stopWatcher()\n    await this.getStaticPathsWorker().end()\n    if (this.hotReloader) {\n      await this.hotReloader.stop()\n    }\n  }\n\n  protected async hasPage(pathname: string): Promise<boolean> {\n    let normalizedPath: string\n\n    try {\n      normalizedPath = normalizePagePath(pathname)\n    } catch (err) {\n      console.error(err)\n      // if normalizing the page fails it means it isn't valid\n      // so it doesn't exist so don't throw and return false\n      // to ensure we return 404 instead of 500\n      return false\n    }\n\n    const pageFile = await findPageFile(\n      this.pagesDir!,\n      normalizedPath,\n      this.nextConfig.pageExtensions\n    )\n    return !!pageFile\n  }\n\n  protected async _beforeCatchAllRender(\n    req: BaseNextRequest,\n    res: BaseNextResponse,\n    params: Params,\n    parsedUrl: UrlWithParsedQuery\n  ): Promise<boolean> {\n    const { pathname } = parsedUrl\n    const pathParts = params.path || []\n    const path = `/${pathParts.join('/')}`\n    // check for a public file, throwing error if there's a\n    // conflicting page\n    let decodedPath: string\n\n    try {\n      decodedPath = decodeURIComponent(path)\n    } catch (_) {\n      throw new DecodeError('failed to decode param')\n    }\n\n    if (await this.hasPublicFile(decodedPath)) {\n      if (await this.hasPage(pathname!)) {\n        const err = new Error(\n          `A conflicting public file and page file was found for path ${pathname} https://nextjs.org/docs/messages/conflicting-public-file-page`\n        )\n        res.statusCode = 500\n        await this.renderError(err, req, res, pathname!, {})\n        return true\n      }\n      await this.servePublic(req, res, pathParts)\n      return true\n    }\n\n    return false\n  }\n\n  private setupWebSocketHandler(server?: HTTPServer, _req?: NodeNextRequest) {\n    if (!this.addedUpgradeListener) {\n      this.addedUpgradeListener = true\n      server = server || (_req?.originalRequest.socket as any)?.server\n\n      if (!server) {\n        // this is very unlikely to happen but show an error in case\n        // it does somehow\n        Log.error(\n          `Invalid IncomingMessage received, make sure http.createServer is being used to handle requests.`\n        )\n      } else {\n        const { basePath } = this.nextConfig\n\n        server.on('upgrade', (req, socket, head) => {\n          let assetPrefix = (this.nextConfig.assetPrefix || '').replace(\n            /^\\/+/,\n            ''\n          )\n\n          // assetPrefix can be a proxy server with a url locally\n          // if so, it's needed to send these HMR requests with a rewritten url directly to /_next/webpack-hmr\n          // otherwise account for a path-like prefix when listening to socket events\n          if (assetPrefix.startsWith('http')) {\n            assetPrefix = ''\n          } else if (assetPrefix) {\n            assetPrefix = `/${assetPrefix}`\n          }\n\n          if (\n            req.url?.startsWith(\n              `${basePath || assetPrefix || ''}/_next/webpack-hmr`\n            )\n          ) {\n            this.hotReloader?.onHMR(req, socket, head)\n          }\n        })\n      }\n    }\n  }\n\n  async runMiddleware(params: {\n    request: BaseNextRequest\n    response: BaseNextResponse\n    parsedUrl: ParsedNextUrl\n    parsed: UrlWithParsedQuery\n  }): Promise<FetchEventResult | null> {\n    try {\n      const result = await super.runMiddleware({\n        ...params,\n        onWarning: (warn) => {\n          this.logErrorWithOriginalStack(warn, 'warning', 'client')\n        },\n      })\n\n      result?.waitUntil.catch((error) =>\n        this.logErrorWithOriginalStack(error, 'unhandledRejection', 'client')\n      )\n      return result\n    } catch (error) {\n      this.logErrorWithOriginalStack(error, undefined, 'client')\n      const err = getProperError(error)\n      ;(err as any).middleware = true\n      const { request, response, parsedUrl } = params\n      this.renderError(err, request, response, parsedUrl.pathname)\n      return null\n    }\n  }\n\n  async run(\n    req: NodeNextRequest,\n    res: NodeNextResponse,\n    parsedUrl: UrlWithParsedQuery\n  ): Promise<void> {\n    await this.devReady\n    this.setupWebSocketHandler(undefined, req)\n\n    const { basePath } = this.nextConfig\n    let originalPathname: string | null = null\n\n    if (basePath && hasBasePath(parsedUrl.pathname || '/', basePath)) {\n      // strip basePath before handling dev bundles\n      // If replace ends up replacing the full url it'll be `undefined`, meaning we have to default it to `/`\n      originalPathname = parsedUrl.pathname\n      parsedUrl.pathname = replaceBasePath(parsedUrl.pathname || '/', basePath)\n    }\n\n    const { pathname } = parsedUrl\n\n    if (pathname!.startsWith('/_next')) {\n      if (await fileExists(pathJoin(this.publicDir, '_next'))) {\n        throw new Error(PUBLIC_DIR_MIDDLEWARE_CONFLICT)\n      }\n    }\n\n    const { finished = false } = await this.hotReloader!.run(\n      req.originalRequest,\n      res.originalResponse,\n      parsedUrl\n    )\n\n    if (finished) {\n      return\n    }\n\n    if (originalPathname) {\n      // restore the path before continuing so that custom-routes can accurately determine\n      // if they should match against the basePath or not\n      parsedUrl.pathname = originalPathname\n    }\n    try {\n      return await super.run(req, res, parsedUrl)\n    } catch (error) {\n      res.statusCode = 500\n      const err = getProperError(error)\n      try {\n        this.logErrorWithOriginalStack(err).catch(() => {})\n        return await this.renderError(err, req, res, pathname!, {\n          __NEXT_PAGE: (isError(err) && err.page) || pathname || '',\n        })\n      } catch (internalErr) {\n        console.error(internalErr)\n        res.body('Internal Server Error').send()\n      }\n    }\n  }\n\n  private async logErrorWithOriginalStack(\n    err?: unknown,\n    type?: 'unhandledRejection' | 'uncaughtException' | 'warning',\n    stats: 'server' | 'client' = 'server'\n  ) {\n    let usedOriginalStack = false\n\n    if (isError(err) && err.name && err.stack && err.message) {\n      try {\n        const frames = parseStack(err.stack!)\n        const frame = frames[0]\n\n        if (frame.lineNumber && frame?.file) {\n          const compilation =\n            stats === 'client'\n              ? this.hotReloader?.clientStats?.compilation\n              : this.hotReloader?.serverStats?.compilation\n\n          const moduleId = frame.file!.replace(\n            /^(webpack-internal:\\/\\/\\/|file:\\/\\/)/,\n            ''\n          )\n\n          const source = await getSourceById(\n            !!frame.file?.startsWith(sep) || !!frame.file?.startsWith('file:'),\n            moduleId,\n            compilation\n          )\n\n          const originalFrame = await createOriginalStackFrame({\n            line: frame.lineNumber!,\n            column: frame.column,\n            source,\n            frame,\n            modulePath: moduleId,\n            rootDirectory: this.dir,\n          })\n\n          if (originalFrame) {\n            const { originalCodeFrame, originalStackFrame } = originalFrame\n            const { file, lineNumber, column, methodName } = originalStackFrame\n\n            console.error(\n              (type === 'warning' ? chalk.yellow('warn') : chalk.red('error')) +\n                ' - ' +\n                `${file} (${lineNumber}:${column}) @ ${methodName}`\n            )\n            console.error(\n              `${(type === 'warning' ? chalk.yellow : chalk.red)(err.name)}: ${\n                err.message\n              }`\n            )\n            console.error(originalCodeFrame)\n            usedOriginalStack = true\n          }\n        }\n      } catch (_) {\n        // failed to load original stack using source maps\n        // this un-actionable by users so we don't show the\n        // internal error and only show the provided stack\n      }\n    }\n\n    if (!usedOriginalStack) {\n      if (type === 'warning') {\n        Log.warn(err + '')\n      } else if (type) {\n        Log.error(`${type}:`, err + '')\n      } else {\n        Log.error(err + '')\n      }\n    }\n  }\n\n  // override production loading of routes-manifest\n  protected getCustomRoutes(): CustomRoutes {\n    // actual routes will be loaded asynchronously during .prepare()\n    return {\n      redirects: [],\n      rewrites: { beforeFiles: [], afterFiles: [], fallback: [] },\n      headers: [],\n    }\n  }\n\n  private _devCachedPreviewProps: __ApiPreviewProps | undefined\n  protected getPreviewProps() {\n    if (this._devCachedPreviewProps) {\n      return this._devCachedPreviewProps\n    }\n    return (this._devCachedPreviewProps = {\n      previewModeId: crypto.randomBytes(16).toString('hex'),\n      previewModeSigningKey: crypto.randomBytes(32).toString('hex'),\n      previewModeEncryptionKey: crypto.randomBytes(32).toString('hex'),\n    })\n  }\n\n  protected getPagesManifest(): undefined {\n    return undefined\n  }\n\n  protected getMiddleware(): never[] {\n    return []\n  }\n\n  protected getMiddlewareManifest(): undefined {\n    return undefined\n  }\n\n  protected async hasMiddleware(\n    pathname: string,\n    isSSR?: boolean\n  ): Promise<boolean> {\n    return this.hasPage(isSSR ? pathname : getMiddlewareFilepath(pathname))\n  }\n\n  protected async ensureMiddleware(pathname: string, isSSR?: boolean) {\n    return this.hotReloader!.ensurePage(\n      isSSR ? pathname : getMiddlewareFilepath(pathname)\n    )\n  }\n\n  generateRoutes() {\n    const { fsRoutes, ...otherRoutes } = super.generateRoutes()\n\n    // In development we expose all compiled files for react-error-overlay's line show feature\n    // We use unshift so that we're sure the routes is defined before Next's default routes\n    fsRoutes.unshift({\n      match: route('/_next/development/:path*'),\n      type: 'route',\n      name: '_next/development catchall',\n      fn: async (req, res, params) => {\n        const p = pathJoin(this.distDir, ...(params.path || []))\n        await this.serveStatic(req, res, p)\n        return {\n          finished: true,\n        }\n      },\n    })\n\n    fsRoutes.unshift({\n      match: route(\n        `/_next/${CLIENT_STATIC_FILES_PATH}/${this.buildId}/${DEV_CLIENT_PAGES_MANIFEST}`\n      ),\n      type: 'route',\n      name: `_next/${CLIENT_STATIC_FILES_PATH}/${this.buildId}/${DEV_CLIENT_PAGES_MANIFEST}`,\n      fn: async (_req, res) => {\n        res.statusCode = 200\n        res.setHeader('Content-Type', 'application/json; charset=utf-8')\n        res\n          .body(\n            JSON.stringify({\n              pages: this.sortedRoutes,\n            })\n          )\n          .send()\n        return {\n          finished: true,\n        }\n      },\n    })\n\n    fsRoutes.unshift({\n      match: route(\n        `/_next/${CLIENT_STATIC_FILES_PATH}/${this.buildId}/${DEV_MIDDLEWARE_MANIFEST}`\n      ),\n      type: 'route',\n      name: `_next/${CLIENT_STATIC_FILES_PATH}/${this.buildId}/${DEV_MIDDLEWARE_MANIFEST}`,\n      fn: async (_req, res) => {\n        res.statusCode = 200\n        res.setHeader('Content-Type', 'application/json; charset=utf-8')\n        res\n          .body(\n            JSON.stringify(\n              this.middleware?.map((middleware) => [\n                middleware.page,\n                !!middleware.ssr,\n              ]) || []\n            )\n          )\n          .send()\n        return {\n          finished: true,\n        }\n      },\n    })\n\n    fsRoutes.push({\n      match: route('/:path*'),\n      type: 'route',\n      requireBasePath: false,\n      name: 'catchall public directory route',\n      fn: async (req, res, params, parsedUrl) => {\n        const { pathname } = parsedUrl\n        if (!pathname) {\n          throw new Error('pathname is undefined')\n        }\n\n        // Used in development to check public directory paths\n        if (await this._beforeCatchAllRender(req, res, params, parsedUrl)) {\n          return {\n            finished: true,\n          }\n        }\n\n        return {\n          finished: false,\n        }\n      },\n    })\n\n    return { fsRoutes, ...otherRoutes }\n  }\n\n  // In development public files are not added to the router but handled as a fallback instead\n  protected generatePublicRoutes(): never[] {\n    return []\n  }\n\n  // In development dynamic routes cannot be known ahead of time\n  protected getDynamicRoutes(): never[] {\n    return []\n  }\n\n  _filterAmpDevelopmentScript(\n    html: string,\n    event: { line: number; col: number; code: string }\n  ): boolean {\n    if (event.code !== 'DISALLOWED_SCRIPT_TAG') {\n      return true\n    }\n\n    const snippetChunks = html.split('\\n')\n\n    let snippet\n    if (\n      !(snippet = html.split('\\n')[event.line - 1]) ||\n      !(snippet = snippet.substring(event.col))\n    ) {\n      return true\n    }\n\n    snippet = snippet + snippetChunks.slice(event.line).join('\\n')\n    snippet = snippet.substring(0, snippet.indexOf('</script>'))\n\n    return !snippet.includes('data-amp-development-mode-only')\n  }\n\n  protected async getStaticPaths(pathname: string): Promise<{\n    staticPaths: string[] | undefined\n    fallbackMode: false | 'static' | 'blocking'\n  }> {\n    // we lazy load the staticPaths to prevent the user\n    // from waiting on them for the page to load in dev mode\n\n    const __getStaticPaths = async () => {\n      const {\n        configFileName,\n        publicRuntimeConfig,\n        serverRuntimeConfig,\n        httpAgentOptions,\n      } = this.nextConfig\n      const { locales, defaultLocale } = this.nextConfig.i18n || {}\n\n      const paths = await this.getStaticPathsWorker().loadStaticPaths(\n        this.distDir,\n        pathname,\n        !this.renderOpts.dev && this._isLikeServerless,\n        {\n          configFileName,\n          publicRuntimeConfig,\n          serverRuntimeConfig,\n        },\n        httpAgentOptions,\n        locales,\n        defaultLocale\n      )\n      return paths\n    }\n    const { paths: staticPaths, fallback } = (\n      await withCoalescedInvoke(__getStaticPaths)(`staticPaths-${pathname}`, [])\n    ).value\n\n    return {\n      staticPaths,\n      fallbackMode:\n        fallback === 'blocking'\n          ? 'blocking'\n          : fallback === true\n          ? 'static'\n          : false,\n    }\n  }\n\n  protected async ensureApiPage(pathname: string) {\n    return this.hotReloader!.ensurePage(pathname)\n  }\n\n  protected async findPageComponents(\n    pathname: string,\n    query: ParsedUrlQuery = {},\n    params: Params | null = null\n  ): Promise<FindComponentsResult | null> {\n    await this.devReady\n    const compilationErr = await this.getCompilationError(pathname)\n    if (compilationErr) {\n      // Wrap build errors so that they don't get logged again\n      throw new WrappedBuildError(compilationErr)\n    }\n    try {\n      await this.hotReloader!.ensurePage(pathname)\n      return super.findPageComponents(pathname, query, params)\n    } catch (err) {\n      if ((err as any).code !== 'ENOENT') {\n        throw err\n      }\n      return null\n    }\n  }\n\n  protected async getFallbackErrorComponents(): Promise<LoadComponentsReturnType | null> {\n    await this.hotReloader!.buildFallbackError()\n    // Build the error page to ensure the fallback is built too.\n    // TODO: See if this can be moved into hotReloader or removed.\n    await this.hotReloader!.ensurePage('/_error')\n    return await loadDefaultErrorComponents(this.distDir)\n  }\n\n  protected setImmutableAssetCacheControl(res: BaseNextResponse): void {\n    res.setHeader('Cache-Control', 'no-store, must-revalidate')\n  }\n\n  private servePublic(\n    req: BaseNextRequest,\n    res: BaseNextResponse,\n    pathParts: string[]\n  ): Promise<void> {\n    const p = pathJoin(this.publicDir, ...pathParts)\n    return this.serveStatic(req, res, p)\n  }\n\n  async hasPublicFile(path: string): Promise<boolean> {\n    try {\n      const info = await fs.promises.stat(pathJoin(this.publicDir, path))\n      return info.isFile()\n    } catch (_) {\n      return false\n    }\n  }\n\n  async getCompilationError(page: string): Promise<any> {\n    const errors = await this.hotReloader!.getCompilationErrors(page)\n    if (errors.length === 0) return\n\n    // Return the very first error we found.\n    return errors[0]\n  }\n\n  protected isServeableUrl(untrustedFileUrl: string): boolean {\n    // This method mimics what the version of `send` we use does:\n    // 1. decodeURIComponent:\n    //    https://github.com/pillarjs/send/blob/0.17.1/index.js#L989\n    //    https://github.com/pillarjs/send/blob/0.17.1/index.js#L518-L522\n    // 2. resolve:\n    //    https://github.com/pillarjs/send/blob/de073ed3237ade9ff71c61673a34474b30e5d45b/index.js#L561\n\n    let decodedUntrustedFilePath: string\n    try {\n      // (1) Decode the URL so we have the proper file name\n      decodedUntrustedFilePath = decodeURIComponent(untrustedFileUrl)\n    } catch {\n      return false\n    }\n\n    // (2) Resolve \"up paths\" to determine real request\n    const untrustedFilePath = pathResolve(decodedUntrustedFilePath)\n\n    // don't allow null bytes anywhere in the file path\n    if (untrustedFilePath.indexOf('\\0') !== -1) {\n      return false\n    }\n\n    // During development mode, files can be added while the server is running.\n    // Checks for .next/static, .next/server, static and public.\n    // Note that in development .next/server is available for error reporting purposes.\n    // see `packages/next/server/next-server.ts` for more details.\n    if (\n      untrustedFilePath.startsWith(pathJoin(this.distDir, 'static') + sep) ||\n      untrustedFilePath.startsWith(pathJoin(this.distDir, 'server') + sep) ||\n      untrustedFilePath.startsWith(pathJoin(this.dir, 'static') + sep) ||\n      untrustedFilePath.startsWith(pathJoin(this.dir, 'public') + sep)\n    ) {\n      return true\n    }\n\n    return false\n  }\n}\n\nfunction getMiddlewareFilepath(pathname: string) {\n  return pathname.endsWith('/')\n    ? `${pathname}_middleware`\n    : `${pathname}/_middleware`\n}\n"],"names":["Log","ReactDevOverlayImpl","ReactDevOverlay","props","undefined","require","DevServer","getStaticPathsWorker","staticPathsWorker","resolve","maxRetries","numWorkers","nextConfig","experimental","cpus","enableWorkerThreads","workerThreads","forkOptions","env","process","NODE_OPTIONS","getStdout","pipe","stdout","getStderr","stderr","options","dev","addedUpgradeListener","renderOpts","ErrorDebug","devReady","Promise","setDevReady","ampSkipValidation","amp","skipValidation","ampValidator","html","pathname","validatorPath","validator","getInstance","then","result","validateString","errors","filter","e","severity","_filterAmpDevelopmentScript","existsSync","dir","console","warn","httpServer","setupWebSocketHandler","isCustomServer","isNextDevCommand","pagesDir","getBuildId","addExportPathMapRoutes","exportPathMap","log","outDir","distDir","buildId","path","page","query","router","addFsRoute","match","type","name","fn","req","res","_params","parsedUrl","urlQuery","Object","keys","key","forEach","mergedQuery","render","finished","startWatcher","webpackWatcher","regexMiddleware","RegExp","pageExtensions","join","regexPageExtension","resolved","reject","readdir","_","files","length","wp","watch","on","routedMiddleware","routedPages","knownFiles","getTimeInfoEntries","ssrMiddleware","Set","isWebServerRuntime","concurrentFeatures","hasServerComponents","serverComponents","fileName","accuracy","test","push","replace","pageName","endsWith","add","middleware","map","has","ssr","sortedRoutes","every","val","idx","hotReloader","send","devPagesManifest","dynamicRoutes","setDynamicRoutes","stopWatcher","close","prepare","customRoutes","redirects","rewrites","headers","beforeFiles","afterFiles","fallback","generateRoutes","config","previewProps","getPreviewProps","start","telemetry","record","webpackVersion","cliCommand","isSrcDir","startsWith","hasNowJson","cwd","reason","logErrorWithOriginalStack","catch","err","end","stop","hasPage","normalizedPath","error","pageFile","_beforeCatchAllRender","params","pathParts","decodedPath","decodeURIComponent","hasPublicFile","Error","statusCode","renderError","servePublic","server","_req","originalRequest","socket","basePath","head","assetPrefix","url","onHMR","runMiddleware","onWarning","waitUntil","request","response","run","originalPathname","publicDir","originalResponse","__NEXT_PAGE","internalErr","body","stats","usedOriginalStack","stack","message","frames","frame","lineNumber","file","compilation","clientStats","serverStats","moduleId","source","originalFrame","line","column","modulePath","rootDirectory","originalCodeFrame","originalStackFrame","methodName","yellow","red","getCustomRoutes","_devCachedPreviewProps","previewModeId","randomBytes","toString","previewModeSigningKey","previewModeEncryptionKey","getPagesManifest","getMiddleware","getMiddlewareManifest","hasMiddleware","isSSR","getMiddlewareFilepath","ensureMiddleware","ensurePage","fsRoutes","otherRoutes","unshift","p","serveStatic","setHeader","JSON","stringify","pages","requireBasePath","generatePublicRoutes","getDynamicRoutes","event","code","snippetChunks","split","snippet","substring","col","slice","indexOf","includes","getStaticPaths","__getStaticPaths","configFileName","publicRuntimeConfig","serverRuntimeConfig","httpAgentOptions","locales","defaultLocale","i18n","paths","loadStaticPaths","_isLikeServerless","staticPaths","value","fallbackMode","ensureApiPage","findPageComponents","compilationErr","getCompilationError","getFallbackErrorComponents","buildFallbackError","setImmutableAssetCacheControl","info","promises","stat","isFile","getCompilationErrors","isServeableUrl","untrustedFileUrl","decodedUntrustedFilePath","untrustedFilePath"],"mappings":"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"}