{"version":3,"sources":["../../server/utils.ts"],"sourcesContent":["import { BLOCKED_PAGES } from '../shared/lib/constants'\n\nexport function isBlockedPage(pathname: string): boolean {\n  return BLOCKED_PAGES.includes(pathname)\n}\n\nexport function cleanAmpPath(pathname: string): string {\n  if (pathname.match(/\\?amp=(y|yes|true|1)/)) {\n    pathname = pathname.replace(/\\?amp=(y|yes|true|1)&?/, '?')\n  }\n  if (pathname.match(/&amp=(y|yes|true|1)/)) {\n    pathname = pathname.replace(/&amp=(y|yes|true|1)/, '')\n  }\n  pathname = pathname.replace(/\\?$/, '')\n  return pathname\n}\n\nexport function isBot(userAgent: string): boolean {\n  return /Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(\n    userAgent\n  )\n}\n\nexport function isTargetLikeServerless(target: string) {\n  const isServerless = target === 'serverless'\n  const isServerlessTrace = target === 'experimental-serverless-trace'\n  return isServerless || isServerlessTrace\n}\n"],"names":["isBlockedPage","cleanAmpPath","isBot","isTargetLikeServerless","pathname","includes","match","replace","userAgent","test","target","isServerless","isServerlessTrace"],"mappings":";;;;QAEgBA,aAAa,GAAbA,aAAa;QAIbC,YAAY,GAAZA,YAAY;QAWZC,KAAK,GAALA,KAAK;QAMLC,sBAAsB,GAAtBA,sBAAsB;AAvBR,GAAyB,CAAzB,UAAyB;SAEvCH,aAAa,CAACI,QAAgB,EAAW,CAAC;IACxD,MAAM,CAHsB,UAAyB,eAGhCC,QAAQ,CAACD,QAAQ;AACxC,CAAC;SAEeH,YAAY,CAACG,QAAgB,EAAU,CAAC;IACtD,EAAE,EAAEA,QAAQ,CAACE,KAAK,0BAA0B,CAAC;QAC3CF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,2BAA2B,CAAG;IAC3D,CAAC;IACD,EAAE,EAAEH,QAAQ,CAACE,KAAK,yBAAyB,CAAC;QAC1CF,QAAQ,GAAGA,QAAQ,CAACG,OAAO,wBAAwB,CAAE;IACvD,CAAC;IACDH,QAAQ,GAAGA,QAAQ,CAACG,OAAO,QAAQ,CAAE;IACrC,MAAM,CAACH,QAAQ;AACjB,CAAC;SAEeF,KAAK,CAACM,SAAiB,EAAW,CAAC;IACjD,MAAM,qVAAqVC,IAAI,CAC7VD,SAAS;AAEb,CAAC;SAEeL,sBAAsB,CAACO,MAAc,EAAE,CAAC;IACtD,KAAK,CAACC,YAAY,GAAGD,MAAM,KAAK,CAAY;IAC5C,KAAK,CAACE,iBAAiB,GAAGF,MAAM,KAAK,CAA+B;IACpE,MAAM,CAACC,YAAY,IAAIC,iBAAiB;AAC1C,CAAC"}