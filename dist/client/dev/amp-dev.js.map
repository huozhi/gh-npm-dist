{"version":3,"sources":["../../../client/dev/amp-dev.js"],"sourcesContent":["/* globals __webpack_hash__ */\nimport { displayContent } from './fouc'\nimport initOnDemandEntries from './on-demand-entries-client'\nimport { addMessageListener, connectHMR } from './error-overlay/websocket'\n\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent)\nwindow.__NEXT_DATA__ = data\n\nlet { assetPrefix, page } = data\nassetPrefix = assetPrefix || ''\nlet mostRecentHash = null\n/* eslint-disable-next-line */\nlet curHash = __webpack_hash__\nconst hotUpdatePath =\n  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n\n// Is there a newer version of this code available?\nfunction isUpdateAvailable() {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle'\n}\n\n// This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates() {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return\n  }\n  try {\n    const res = await fetch(\n      typeof __webpack_runtime_id__ !== 'undefined'\n        ? // eslint-disable-next-line no-undef\n          `${hotUpdatePath}${curHash}.${__webpack_runtime_id__}.hot-update.json`\n        : `${hotUpdatePath}${curHash}.hot-update.json`\n    )\n    const jsonData = await res.json()\n    const curPage = page === '/' ? 'index' : page\n    // webpack 5 uses an array instead\n    const pageUpdated = (\n      Array.isArray(jsonData.c) ? jsonData.c : Object.keys(jsonData.c)\n    ).some((mod) => {\n      return (\n        mod.indexOf(\n          `pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`\n        ) !== -1 ||\n        mod.indexOf(\n          `pages${\n            curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`\n          }`.replace(/\\//g, '\\\\')\n        ) !== -1\n      )\n    })\n\n    if (pageUpdated) {\n      document.location.reload(true)\n    } else {\n      curHash = mostRecentHash\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err)\n    document.location.reload(true)\n  }\n}\n\naddMessageListener((event) => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return\n  }\n\n  try {\n    const message = JSON.parse(event.data)\n\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return\n      }\n      mostRecentHash = message.hash\n      tryApplyUpdates()\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true)\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex)\n  }\n})\n\nconnectHMR({\n  assetPrefix,\n  path: '/_next/webpack-hmr',\n})\ndisplayContent()\n\ninitOnDemandEntries(data.page)\n"],"names":["data","JSON","parse","document","getElementById","textContent","window","__NEXT_DATA__","assetPrefix","page","mostRecentHash","curHash","__webpack_hash__","hotUpdatePath","endsWith","isUpdateAvailable","canApplyUpdates","module","hot","status","tryApplyUpdates","res","fetch","__webpack_runtime_id__","jsonData","json","curPage","pageUpdated","Array","isArray","c","Object","keys","some","mod","indexOf","substr","replace","location","reload","err","console","error","event","message","action","hash","ex","warn","path"],"mappings":";AAC+B,GAAQ,CAAR,KAAQ;AACP,GAA4B,CAA5B,sBAA4B;AACb,GAA2B,CAA3B,UAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE1E,KAAK,CAACA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACC,cAAc,CAAC,CAAe,gBAAEC,WAAW;AAC5EC,MAAM,CAACC,aAAa,GAAGP,IAAI;AAE3B,GAAG,CAAC,CAAC,CAACQ,WAAW,GAAEC,IAAI,EAAC,CAAC,GAAGT,IAAI;AAChCQ,WAAW,GAAGA,WAAW,IAAI,CAAE;AAC/B,GAAG,CAACE,cAAc,GAAG,IAAI;AACzB,EAA8B,AAA9B,0BAA8B,AAA9B,EAA8B,CAC9B,GAAG,CAACC,OAAO,GAAGC,gBAAgB;AAC9B,KAAK,CAACC,aAAa,GACjBL,WAAW,IAAIA,WAAW,CAACM,QAAQ,CAAC,CAAG,MAAI,CAAE,IAAG,CAAG,MAAI,CAAuB;AAEhF,EAAmD,AAAnD,iDAAmD;SAC1CC,iBAAiB,GAAG,CAAC;IAC5B,EAA2D,AAA3D,yDAA2D;IAC3D,EAA8C,AAA9C,4CAA8C;IAC9C,EAA8B,AAA9B,0BAA8B,AAA9B,EAA8B,CAC9B,MAAM,CAACL,cAAc,KAAKE,gBAAgB;AAC5C,CAAC;AAED,EAA6C,AAA7C,2CAA6C;SACpCI,eAAe,GAAG,CAAC;IAC1B,MAAM,CAACC,MAAM,CAACC,GAAG,CAACC,MAAM,OAAO,CAAM;AACvC,CAAC;SAIcC,eAAe;WAAfA,gBAAe;;SAAfA,gBAAe;IAAfA,gBAAe,GAF9B,EAAuD,AAAvD,qDAAuD;IACvD,EAAwC,AAAxC,sCAAwC;sBACxC,QAAQ,IAAyB,CAAC;QAChC,EAAE,GAAGL,iBAAiB,OAAOC,eAAe,IAAI,CAAC;YAC/C,MAAM;QACR,CAAC;QACD,GAAG,CAAC,CAAC;YACH,KAAK,CAACK,GAAG,SAASC,KAAK,CACrB,MAAM,CAACC,sBAAsB,KAAK,CAAW,gBAEtCV,aAAa,GAAGF,OAAO,CAAC,CAAC,EAAEY,sBAAsB,CAAC,gBAAgB,OAClEV,aAAa,GAAGF,OAAO,CAAC,gBAAgB;YAEjD,KAAK,CAACa,QAAQ,SAASH,GAAG,CAACI,IAAI;YAC/B,KAAK,CAACC,OAAO,GAAGjB,IAAI,KAAK,CAAG,KAAG,CAAO,SAAGA,IAAI;YAC7C,EAAkC,AAAlC,gCAAkC;YAClC,KAAK,CAACkB,WAAW,IACfC,KAAK,CAACC,OAAO,CAACL,QAAQ,CAACM,CAAC,IAAIN,QAAQ,CAACM,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACR,QAAQ,CAACM,CAAC,GAC/DG,IAAI,EAAEC,GAAG,GAAK,CAAC;gBACf,MAAM,CACJA,GAAG,CAACC,OAAO,EACR,KAAK,EAAET,OAAO,CAACU,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,CAAG,KAAGV,OAAO,IAAI,CAAC,EAAEA,OAAO,WACvD,CAAC,IACRQ,GAAG,CAACC,OAAO,EACR,KAAK,EACJT,OAAO,CAACU,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,CAAG,KAAGV,OAAO,IAAI,CAAC,EAAEA,OAAO,KACnDW,OAAO,QAAQ,CAAI,WACjB,CAAC;YAEZ,CAAC;YAED,EAAE,EAAEV,WAAW,EAAE,CAAC;gBAChBxB,QAAQ,CAACmC,QAAQ,CAACC,MAAM,CAAC,IAAI;YAC/B,CAAC,MAAM,CAAC;gBACN5B,OAAO,GAAGD,cAAc;YAC1B,CAAC;QACH,CAAC,CAAC,KAAK,EAAE8B,GAAG,EAAE,CAAC;YACbC,OAAO,CAACC,KAAK,CAAC,CAAoC,qCAAEF,GAAG;YACvDrC,QAAQ,CAACmC,QAAQ,CAACC,MAAM,CAAC,IAAI;QAC/B,CAAC;IACH,CAAC;WAtCcnB,gBAAe;;IA5BiB,UAA2B,sBAoEtDuB,KAAK,GAAK,CAAC;IAC7B,EAAE,EAAEA,KAAK,CAAC3C,IAAI,KAAK,CAAc,eAAE,CAAC;QAClC,MAAM;IACR,CAAC;IAED,GAAG,CAAC,CAAC;QACH,KAAK,CAAC4C,OAAO,GAAG3C,IAAI,CAACC,KAAK,CAACyC,KAAK,CAAC3C,IAAI;QAErC,EAAE,EAAE4C,OAAO,CAACC,MAAM,KAAK,CAAM,SAAID,OAAO,CAACC,MAAM,KAAK,CAAO,QAAE,CAAC;YAC5D,EAAE,GAAGD,OAAO,CAACE,IAAI,EAAE,CAAC;gBAClB,MAAM;YACR,CAAC;YACDpC,cAAc,GAAGkC,OAAO,CAACE,IAAI;YAC7B1B,eAAe;QACjB,CAAC,MAAM,EAAE,EAAEwB,OAAO,CAACC,MAAM,KAAK,CAAY,aAAE,CAAC;YAC3C1C,QAAQ,CAACmC,QAAQ,CAACC,MAAM,CAAC,IAAI;QAC/B,CAAC;IACH,CAAC,CAAC,KAAK,EAAEQ,EAAE,EAAE,CAAC;QACZN,OAAO,CAACO,IAAI,CAAC,CAAuB,yBAAGL,KAAK,CAAC3C,IAAI,GAAG,CAAI,MAAG+C,EAAE;IAC/D,CAAC;AACH,CAAC;IAxF8C,UAA2B,aA0F/D,CAAC;IACVvC,WAAW;IACXyC,IAAI,EAAE,CAAoB;AAC5B,CAAC;IA/F8B,KAAQ;IACP,sBAA4B,UAiGxCjD,IAAI,CAACS,IAAI"}