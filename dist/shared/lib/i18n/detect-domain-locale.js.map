{"version":3,"sources":["../../../../shared/lib/i18n/detect-domain-locale.ts"],"sourcesContent":["import type { DomainLocale } from '../../../server/config-shared'\n\nexport function detectDomainLocale(\n  domainItems?: DomainLocale[],\n  hostname?: string,\n  detectedLocale?: string\n) {\n  let domainItem: DomainLocale | undefined\n\n  if (domainItems) {\n    if (detectedLocale) {\n      detectedLocale = detectedLocale.toLowerCase()\n    }\n\n    for (const item of domainItems) {\n      // remove port if present\n      const domainHostname = item.domain?.split(':')[0].toLowerCase()\n      if (\n        hostname === domainHostname ||\n        detectedLocale === item.defaultLocale.toLowerCase() ||\n        item.locales?.some((locale) => locale.toLowerCase() === detectedLocale)\n      ) {\n        domainItem = item\n        break\n      }\n    }\n  }\n\n  return domainItem\n}\n"],"names":["detectDomainLocale","domainItems","hostname","detectedLocale","domainItem","toLowerCase","item","domainHostname","domain","split","defaultLocale","locales","some","locale"],"mappings":";;;;QAEgBA,kBAAkB,GAAlBA,kBAAkB;SAAlBA,kBAAkB,CAChCC,WAA4B,EAC5BC,QAAiB,EACjBC,cAAuB,EACvB,CAAC;IACD,GAAG,CAACC,UAAU;IAEd,EAAE,EAAEH,WAAW,EAAE,CAAC;QAChB,EAAE,EAAEE,cAAc,EAAE,CAAC;YACnBA,cAAc,GAAGA,cAAc,CAACE,WAAW;QAC7C,CAAC;QAED,GAAG,EAAE,KAAK,CAACC,IAAI,IAAIL,WAAW,CAAE,CAAC;gBAERK,GAAW,EAIhCA,IAAY;YALd,EAAyB,AAAzB,uBAAyB;YACzB,KAAK,CAACC,cAAc,IAAGD,GAAW,GAAXA,IAAI,CAACE,MAAM,cAAXF,GAAW,KAAXA,IAAI,CAAJA,CAAkB,GAAlBA,IAAI,CAAJA,CAAkB,GAAlBA,GAAW,CAAEG,KAAK,CAAC,CAAG,IAAE,CAAC,EAAEJ,WAAW;YAC7D,EAAE,EACAH,QAAQ,KAAKK,cAAc,IAC3BJ,cAAc,KAAKG,IAAI,CAACI,aAAa,CAACL,WAAW,QACjDC,IAAY,GAAZA,IAAI,CAACK,OAAO,cAAZL,IAAY,KAAZA,IAAI,CAAJA,CAAkB,GAAlBA,IAAI,CAAJA,CAAkB,GAAlBA,IAAY,CAAEM,IAAI,EAAEC,MAAM,GAAKA,MAAM,CAACR,WAAW,OAAOF,cAAc;gBACtE,CAAC;gBACDC,UAAU,GAAGE,IAAI;gBACjB,KAAK;YACP,CAAC;QACH,CAAC;IACH,CAAC;IAED,MAAM,CAACF,UAAU;AACnB,CAAC"}