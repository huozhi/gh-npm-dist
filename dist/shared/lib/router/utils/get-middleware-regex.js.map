{"version":3,"sources":["../../../../../shared/lib/router/utils/get-middleware-regex.ts"],"sourcesContent":["import { getParametrizedRoute, RouteRegex } from './route-regex'\n\nexport function getMiddlewareRegex(\n  normalizedRoute: string,\n  catchAll: boolean = true\n): RouteRegex {\n  const result = getParametrizedRoute(normalizedRoute)\n\n  let catchAllRegex = catchAll ? '(?!_next).*' : ''\n  let catchAllGroupedRegex = catchAll ? '(?:(/.*)?)' : ''\n\n  if ('routeKeys' in result) {\n    if (result.parameterizedRoute === '/') {\n      return {\n        groups: {},\n        namedRegex: `^/${catchAllRegex}$`,\n        re: new RegExp(`^/${catchAllRegex}$`),\n        routeKeys: {},\n      }\n    }\n\n    return {\n      groups: result.groups,\n      namedRegex: `^${result.namedParameterizedRoute}${catchAllGroupedRegex}$`,\n      re: new RegExp(`^${result.parameterizedRoute}${catchAllGroupedRegex}$`),\n      routeKeys: result.routeKeys,\n    }\n  }\n\n  if (result.parameterizedRoute === '/') {\n    return {\n      groups: {},\n      re: new RegExp(`^/${catchAllRegex}$`),\n    }\n  }\n\n  return {\n    groups: {},\n    re: new RegExp(`^${result.parameterizedRoute}${catchAllGroupedRegex}$`),\n  }\n}\n"],"names":["getMiddlewareRegex","normalizedRoute","catchAll","result","catchAllRegex","catchAllGroupedRegex","parameterizedRoute","groups","namedRegex","re","RegExp","routeKeys","namedParameterizedRoute"],"mappings":";;;;QAEgBA,kBAAkB,GAAlBA,kBAAkB;AAFe,GAAe,CAAf,WAAe;SAEhDA,kBAAkB,CAChCC,eAAuB,EACvBC,QAAiB,GAAG,IAAI,EACZ,CAAC;IACb,KAAK,CAACC,MAAM,OANmC,WAAe,uBAM1BF,eAAe;IAEnD,GAAG,CAACG,aAAa,GAAGF,QAAQ,GAAG,CAAa,eAAG,CAAE;IACjD,GAAG,CAACG,oBAAoB,GAAGH,QAAQ,GAAG,CAAY,cAAG,CAAE;IAEvD,EAAE,EAAE,CAAW,cAAIC,MAAM,EAAE,CAAC;QAC1B,EAAE,EAAEA,MAAM,CAACG,kBAAkB,KAAK,CAAG,IAAE,CAAC;YACtC,MAAM,CAAC,CAAC;gBACNC,MAAM,EAAE,CAAC,CAAC;gBACVC,UAAU,GAAG,EAAE,EAAEJ,aAAa,CAAC,CAAC;gBAChCK,EAAE,EAAE,GAAG,CAACC,MAAM,EAAE,EAAE,EAAEN,aAAa,CAAC,CAAC;gBACnCO,SAAS,EAAE,CAAC,CAAC;YACf,CAAC;QACH,CAAC;QAED,MAAM,CAAC,CAAC;YACNJ,MAAM,EAAEJ,MAAM,CAACI,MAAM;YACrBC,UAAU,GAAG,CAAC,EAAEL,MAAM,CAACS,uBAAuB,GAAGP,oBAAoB,CAAC,CAAC;YACvEI,EAAE,EAAE,GAAG,CAACC,MAAM,EAAE,CAAC,EAAEP,MAAM,CAACG,kBAAkB,GAAGD,oBAAoB,CAAC,CAAC;YACrEM,SAAS,EAAER,MAAM,CAACQ,SAAS;QAC7B,CAAC;IACH,CAAC;IAED,EAAE,EAAER,MAAM,CAACG,kBAAkB,KAAK,CAAG,IAAE,CAAC;QACtC,MAAM,CAAC,CAAC;YACNC,MAAM,EAAE,CAAC,CAAC;YACVE,EAAE,EAAE,GAAG,CAACC,MAAM,EAAE,EAAE,EAAEN,aAAa,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IAED,MAAM,CAAC,CAAC;QACNG,MAAM,EAAE,CAAC,CAAC;QACVE,EAAE,EAAE,GAAG,CAACC,MAAM,EAAE,CAAC,EAAEP,MAAM,CAACG,kBAAkB,GAAGD,oBAAoB,CAAC,CAAC;IACvE,CAAC;AACH,CAAC"}