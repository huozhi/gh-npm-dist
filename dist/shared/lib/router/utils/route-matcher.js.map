{"version":3,"sources":["../../../../../shared/lib/router/utils/route-matcher.ts"],"sourcesContent":["import { DecodeError } from '../../utils'\nimport { getRouteRegex } from './route-regex'\n\nexport function getRouteMatcher(routeRegex: ReturnType<typeof getRouteRegex>) {\n  const { re, groups } = routeRegex\n  return (pathname: string | null | undefined) => {\n    const routeMatch = re.exec(pathname!)\n    if (!routeMatch) {\n      return false\n    }\n\n    const decode = (param: string) => {\n      try {\n        return decodeURIComponent(param)\n      } catch (_) {\n        throw new DecodeError('failed to decode param')\n      }\n    }\n    const params: { [paramName: string]: string | string[] } = {}\n\n    Object.keys(groups).forEach((slugName: string) => {\n      const g = groups[slugName]\n      const m = routeMatch[g.pos]\n      if (m !== undefined) {\n        params[slugName] = ~m.indexOf('/')\n          ? m.split('/').map((entry) => decode(entry))\n          : g.repeat\n          ? [decode(m)]\n          : decode(m)\n      }\n    })\n    return params\n  }\n}\n"],"names":["getRouteMatcher","routeRegex","re","groups","pathname","routeMatch","exec","decode","param","decodeURIComponent","_","params","Object","keys","forEach","slugName","g","m","pos","undefined","indexOf","split","map","entry","repeat"],"mappings":";;;;QAGgBA,eAAe,GAAfA,eAAe;AAHH,GAAa,CAAb,MAAa;SAGzBA,eAAe,CAACC,UAA4C,EAAE,CAAC;IAC7E,KAAK,CAAC,CAAC,CAACC,EAAE,GAAEC,MAAM,EAAC,CAAC,GAAGF,UAAU;IACjC,MAAM,EAAEG,QAAmC,GAAK,CAAC;QAC/C,KAAK,CAACC,UAAU,GAAGH,EAAE,CAACI,IAAI,CAACF,QAAQ;QACnC,EAAE,GAAGC,UAAU,EAAE,CAAC;YAChB,MAAM,CAAC,KAAK;QACd,CAAC;QAED,KAAK,CAACE,MAAM,IAAIC,KAAa,GAAK,CAAC;YACjC,GAAG,CAAC,CAAC;gBACH,MAAM,CAACC,kBAAkB,CAACD,KAAK;YACjC,CAAC,CAAC,KAAK,EAAEE,CAAC,EAAE,CAAC;gBACX,KAAK,CAAC,GAAG,CAfW,MAAa,aAeX,CAAwB;YAChD,CAAC;QACH,CAAC;QACD,KAAK,CAACC,MAAM,GAA+C,CAAC,CAAC;QAE7DC,MAAM,CAACC,IAAI,CAACV,MAAM,EAAEW,OAAO,EAAEC,QAAgB,GAAK,CAAC;YACjD,KAAK,CAACC,CAAC,GAAGb,MAAM,CAACY,QAAQ;YACzB,KAAK,CAACE,CAAC,GAAGZ,UAAU,CAACW,CAAC,CAACE,GAAG;YAC1B,EAAE,EAAED,CAAC,KAAKE,SAAS,EAAE,CAAC;gBACpBR,MAAM,CAACI,QAAQ,KAAKE,CAAC,CAACG,OAAO,CAAC,CAAG,MAC7BH,CAAC,CAACI,KAAK,CAAC,CAAG,IAAEC,GAAG,EAAEC,KAAK,GAAKhB,MAAM,CAACgB,KAAK;oBACxCP,CAAC,CAACQ,MAAM,GACR,CAACjB;oBAAAA,MAAM,CAACU,CAAC;gBAAC,CAAC,GACXV,MAAM,CAACU,CAAC;YACd,CAAC;QACH,CAAC;QACD,MAAM,CAACN,MAAM;IACf,CAAC;AACH,CAAC"}