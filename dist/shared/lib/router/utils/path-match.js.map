{"version":3,"sources":["../../../../../shared/lib/router/utils/path-match.ts"],"sourcesContent":["import * as pathToRegexp from 'next/dist/compiled/path-to-regexp'\n\nexport { pathToRegexp }\n\nexport const matcherOptions: pathToRegexp.TokensToRegexpOptions &\n  pathToRegexp.ParseOptions = {\n  sensitive: false,\n  delimiter: '/',\n}\n\nexport const customRouteMatcherOptions: pathToRegexp.TokensToRegexpOptions &\n  pathToRegexp.ParseOptions = {\n  ...matcherOptions,\n  strict: true,\n}\n\nexport default (customRoute = false) => {\n  return (path: string, regexModifier?: (regex: string) => string) => {\n    const keys: pathToRegexp.Key[] = []\n    let matcherRegex = pathToRegexp.pathToRegexp(\n      path,\n      keys,\n      customRoute ? customRouteMatcherOptions : matcherOptions\n    )\n\n    if (regexModifier) {\n      const regexSource = regexModifier(matcherRegex.source)\n      matcherRegex = new RegExp(regexSource, matcherRegex.flags)\n    }\n\n    const matcher = pathToRegexp.regexpToFunction(matcherRegex, keys)\n\n    return (pathname: string | null | undefined, params?: any) => {\n      const res = pathname == null ? false : matcher(pathname)\n      if (!res) {\n        return false\n      }\n\n      if (customRoute) {\n        for (const key of keys) {\n          // unnamed params should be removed as they\n          // are not allowed to be used in the destination\n          if (typeof key.name === 'number') {\n            delete (res.params as any)[key.name]\n          }\n        }\n      }\n\n      return { ...params, ...res.params }\n    }\n  }\n}\n"],"names":["pathToRegexp","matcherOptions","sensitive","delimiter","customRouteMatcherOptions","strict","customRoute","path","regexModifier","keys","matcherRegex","regexSource","source","RegExp","flags","matcher","regexpToFunction","pathname","params","res","key","name"],"mappings":";;;;;AAAYA,GAAY,CAAZA,YAAY;;;;;;;;;;;;;;;;;;;;;;QAEfA,YAAY,GAFTA,YAAY;AAIjB,KAAK,CAACC,cAAc,GACG,CAAC;IAC7BC,SAAS,EAAE,KAAK;IAChBC,SAAS,EAAE,CAAG;AAChB,CAAC;QAJYF,cAAc,GAAdA,cAAc;AAMpB,KAAK,CAACG,yBAAyB,GACR,CAAC;OAC1BH,cAAc;IACjBI,MAAM,EAAE,IAAI;AACd,CAAC;QAJYD,yBAAyB,GAAzBA,yBAAyB;gBAMtBE,WAAW,GAAG,KAAK,GAAK,CAAC;IACvC,MAAM,EAAEC,IAAY,EAAEC,aAAyC,GAAK,CAAC;QACnE,KAAK,CAACC,IAAI,GAAuB,CAAC,CAAC;QACnC,GAAG,CAACC,YAAY,GAnBRV,YAAY,CAmBYA,YAAY,CAC1CO,IAAI,EACJE,IAAI,EACJH,WAAW,GAAGF,yBAAyB,GAAGH,cAAc;QAG1D,EAAE,EAAEO,aAAa,EAAE,CAAC;YAClB,KAAK,CAACG,WAAW,GAAGH,aAAa,CAACE,YAAY,CAACE,MAAM;YACrDF,YAAY,GAAG,GAAG,CAACG,MAAM,CAACF,WAAW,EAAED,YAAY,CAACI,KAAK;QAC3D,CAAC;QAED,KAAK,CAACC,OAAO,GA9BLf,YAAY,CA8BSgB,gBAAgB,CAACN,YAAY,EAAED,IAAI;QAEhE,MAAM,EAAEQ,QAAmC,EAAEC,MAAY,GAAK,CAAC;YAC7D,KAAK,CAACC,GAAG,GAAGF,QAAQ,IAAI,IAAI,GAAG,KAAK,GAAGF,OAAO,CAACE,QAAQ;YACvD,EAAE,GAAGE,GAAG,EAAE,CAAC;gBACT,MAAM,CAAC,KAAK;YACd,CAAC;YAED,EAAE,EAAEb,WAAW,EAAE,CAAC;gBAChB,GAAG,EAAE,KAAK,CAACc,GAAG,IAAIX,IAAI,CAAE,CAAC;oBACvB,EAA2C,AAA3C,yCAA2C;oBAC3C,EAAgD,AAAhD,8CAAgD;oBAChD,EAAE,EAAE,MAAM,CAACW,GAAG,CAACC,IAAI,KAAK,CAAQ,SAAE,CAAC;wBACjC,MAAM,CAAEF,GAAG,CAACD,MAAM,CAASE,GAAG,CAACC,IAAI;oBACrC,CAAC;gBACH,CAAC;YACH,CAAC;YAED,MAAM,CAAC,CAAC;mBAAIH,MAAM;mBAAKC,GAAG,CAACD,MAAM;YAAC,CAAC;QACrC,CAAC;IACH,CAAC;AACH,CAAC"}