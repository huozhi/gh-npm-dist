{"version":3,"sources":["../../../lib/typescript/missingDependencyError.ts"],"sourcesContent":["import chalk from 'next/dist/compiled/chalk'\n\nimport { getOxfordCommaList } from '../oxford-comma-list'\nimport { MissingDependency } from '../has-necessary-dependencies'\nimport { FatalError } from '../fatal-error'\nimport { isYarn } from '../is-yarn'\n\nexport async function missingDepsError(\n  dir: string,\n  missingPackages: MissingDependency[]\n) {\n  const packagesHuman = getOxfordCommaList(missingPackages.map((p) => p.pkg))\n  const packagesCli = missingPackages.map((p) => p.pkg).join(' ')\n\n  const removalMsg =\n    '\\n\\n' +\n    chalk.bold(\n      'If you are not trying to use TypeScript, please remove the ' +\n        chalk.cyan('tsconfig.json') +\n        ' file from your package root (and any TypeScript files in your pages directory).'\n    )\n\n  throw new FatalError(\n    chalk.bold.red(\n      `It looks like you're trying to use TypeScript but do not have the required package(s) installed.`\n    ) +\n      '\\n\\n' +\n      chalk.bold(`Please install ${chalk.bold(packagesHuman)} by running:`) +\n      '\\n\\n' +\n      `\\t${chalk.bold.cyan(\n        ((await isYarn(dir)) ? 'yarn add --dev' : 'npm install --save-dev') +\n          ' ' +\n          packagesCli\n      )}` +\n      removalMsg +\n      '\\n'\n  )\n}\n"],"names":["missingDepsError","dir","missingPackages","packagesHuman","map","p","pkg","packagesCli","join","removalMsg","bold","cyan","red"],"mappings":";;;;QAOsBA,gBAAgB,GAAhBA,gBAAgB;AAPpB,GAA0B,CAA1B,MAA0B;AAET,GAAsB,CAAtB,gBAAsB;AAE9B,GAAgB,CAAhB,WAAgB;AACpB,GAAY,CAAZ,OAAY;;;;;;eAEbA,gBAAgB,CACpCC,GAAW,EACXC,eAAoC,EACpC,CAAC;IACD,KAAK,CAACC,aAAa,OATc,gBAAsB,qBASdD,eAAe,CAACE,GAAG,EAAEC,CAAC,GAAKA,CAAC,CAACC,GAAG;;IACzE,KAAK,CAACC,WAAW,GAAGL,eAAe,CAACE,GAAG,EAAEC,CAAC,GAAKA,CAAC,CAACC,GAAG;MAAEE,IAAI,CAAC,CAAG;IAE9D,KAAK,CAACC,UAAU,GACd,CAAM,QAfQ,MAA0B,SAgBlCC,IAAI,CACR,CAA6D,+DAjBjD,MAA0B,SAkB9BC,IAAI,CAAC,CAAe,kBAC1B,CAAkF;IAGxF,KAAK,CAAC,GAAG,CAlBgB,WAAgB,YAJzB,MAA0B,SAuBlCD,IAAI,CAACE,GAAG,EACX,gGAAgG,KAEjG,CAAM,QA1BM,MAA0B,SA2BhCF,IAAI,EAAE,eAAe,EA3Bf,MAA0B,SA2BHA,IAAI,CAACP,aAAa,EAAE,YAAY,KACnE,CAAM,SACL,EAAE,EA7BS,MAA0B,SA6B3BO,IAAI,CAACC,IAAI,EAChB,KAAK,KAzBQ,OAAY,SAyBZV,GAAG,IAAK,CAAgB,kBAAG,CAAwB,2BAChE,CAAG,KACHM,WAAW,MAEfE,UAAU,GACV,CAAI;AAEV,CAAC"}