{"version":3,"sources":["../../../lib/eslint/hasEslintConfiguration.ts"],"sourcesContent":["import { promises as fs } from 'fs'\n\nexport type ConfigAvailable = {\n  exists: boolean\n  emptyEslintrc?: boolean\n  emptyPkgJsonConfig?: boolean\n  firstTimeSetup?: true\n}\n\nexport async function hasEslintConfiguration(\n  eslintrcFile: string | null,\n  packageJsonConfig: { eslintConfig: any } | null\n): Promise<ConfigAvailable> {\n  const configObject = {\n    exists: false,\n    emptyEslintrc: false,\n    emptyPkgJsonConfig: false,\n  }\n\n  if (eslintrcFile) {\n    const content = await fs.readFile(eslintrcFile, { encoding: 'utf8' }).then(\n      (txt) => txt.trim().replace(/\\n/g, ''),\n      () => null\n    )\n\n    if (\n      content === '' ||\n      content === '{}' ||\n      content === '---' ||\n      content === 'module.exports = {}'\n    ) {\n      return { ...configObject, emptyEslintrc: true }\n    }\n  } else if (packageJsonConfig?.eslintConfig) {\n    if (Object.entries(packageJsonConfig?.eslintConfig).length === 0) {\n      return {\n        ...configObject,\n        emptyPkgJsonConfig: true,\n      }\n    }\n  } else {\n    return configObject\n  }\n\n  return { ...configObject, exists: true }\n}\n"],"names":["hasEslintConfiguration","eslintrcFile","packageJsonConfig","configObject","exists","emptyEslintrc","emptyPkgJsonConfig","content","readFile","encoding","then","txt","trim","replace","eslintConfig","Object","entries","length"],"mappings":";;;;QASsBA,sBAAsB,GAAtBA,sBAAsB;AATb,GAAI,CAAJ,GAAI;eASbA,sBAAsB,CAC1CC,YAA2B,EAC3BC,iBAA+C,EACrB,CAAC;IAC3B,KAAK,CAACC,YAAY,GAAG,CAAC;QACpBC,MAAM,EAAE,KAAK;QACbC,aAAa,EAAE,KAAK;QACpBC,kBAAkB,EAAE,KAAK;IAC3B,CAAC;IAED,EAAE,EAAEL,YAAY,EAAE,CAAC;QACjB,KAAK,CAACM,OAAO,GAAG,KAAK,CApBM,GAAI,UAoBNC,QAAQ,CAACP,YAAY,EAAE,CAAC;YAACQ,QAAQ,EAAE,CAAM;QAAC,CAAC,EAAEC,IAAI,EACvEC,GAAG,GAAKA,GAAG,CAACC,IAAI,GAAGC,OAAO,QAAQ,CAAE;cAC/B,IAAI;;QAGZ,EAAE,EACAN,OAAO,KAAK,CAAE,KACdA,OAAO,KAAK,CAAI,OAChBA,OAAO,KAAK,CAAK,QACjBA,OAAO,KAAK,CAAqB,sBACjC,CAAC;YACD,MAAM,CAAC,CAAC;mBAAIJ,YAAY;gBAAEE,aAAa,EAAE,IAAI;YAAC,CAAC;QACjD,CAAC;IACH,CAAC,MAAM,EAAE,EAAEH,iBAAiB,aAAjBA,iBAAiB,KAAjBA,IAAI,CAAJA,CAA+B,GAA/BA,IAAI,CAAJA,CAA+B,GAA/BA,iBAAiB,CAAEY,YAAY,EAAE,CAAC;QAC3C,EAAE,EAAEC,MAAM,CAACC,OAAO,CAACd,iBAAiB,aAAjBA,iBAAiB,KAAjBA,IAAI,CAAJA,CAA+B,GAA/BA,IAAI,CAAJA,CAA+B,GAA/BA,iBAAiB,CAAEY,YAAY,EAAEG,MAAM,KAAK,CAAC,EAAE,CAAC;YACjE,MAAM,CAAC,CAAC;mBACHd,YAAY;gBACfG,kBAAkB,EAAE,IAAI;YAC1B,CAAC;QACH,CAAC;IACH,CAAC,MAAM,CAAC;QACN,MAAM,CAACH,YAAY;IACrB,CAAC;IAED,MAAM,CAAC,CAAC;WAAIA,YAAY;QAAEC,MAAM,EAAE,IAAI;IAAC,CAAC;AAC1C,CAAC"}