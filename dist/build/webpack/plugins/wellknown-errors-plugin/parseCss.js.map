{"version":3,"sources":["../../../../../build/webpack/plugins/wellknown-errors-plugin/parseCss.ts"],"sourcesContent":["import Chalk from 'next/dist/compiled/chalk'\nimport { SimpleWebpackError } from './simpleWebpackError'\n\nconst chalk = new Chalk.constructor({ enabled: true })\nconst regexCssError =\n  /^(?:CssSyntaxError|SyntaxError)\\n\\n\\((\\d+):(\\d*)\\) (.*)$/s\n\nexport function getCssError(\n  fileName: string,\n  err: Error\n): SimpleWebpackError | false {\n  if (\n    !(\n      (err.name === 'CssSyntaxError' || err.name === 'SyntaxError') &&\n      (err as any).stack === false &&\n      !(err instanceof SyntaxError)\n    )\n  ) {\n    return false\n  }\n\n  // https://github.com/postcss/postcss-loader/blob/d6931da177ac79707bd758436e476036a55e4f59/src/Error.js\n\n  const res = regexCssError.exec(err.message)\n  if (res) {\n    const [, _lineNumer, _column, reason] = res\n    const lineNumber = Math.max(1, parseInt(_lineNumer, 10))\n    const column = Math.max(1, parseInt(_column, 10))\n\n    return new SimpleWebpackError(\n      `${chalk.cyan(fileName)}:${chalk.yellow(\n        lineNumber.toString()\n      )}:${chalk.yellow(column.toString())}`,\n      chalk.red.bold('Syntax error').concat(`: ${reason}`)\n    )\n  }\n\n  return false\n}\n"],"names":["getCssError","chalk","constructor","enabled","regexCssError","fileName","err","name","stack","SyntaxError","res","exec","message","_lineNumer","_column","reason","lineNumber","Math","max","parseInt","column","cyan","yellow","toString","red","bold","concat"],"mappings":";;;;QAOgBA,WAAW,GAAXA,WAAW;AAPT,GAA0B,CAA1B,MAA0B;AACT,GAAsB,CAAtB,mBAAsB;;;;;;AAEzD,KAAK,CAACC,KAAK,GAAG,GAAG,CAHC,MAA0B,SAGpBC,WAAW,CAAC,CAAC;IAACC,OAAO,EAAE,IAAI;AAAC,CAAC;AACrD,KAAK,CAACC,aAAa;SAGHJ,WAAW,CACzBK,QAAgB,EAChBC,GAAU,EACkB,CAAC;IAC7B,EAAE,KAEGA,GAAG,CAACC,IAAI,KAAK,CAAgB,mBAAID,GAAG,CAACC,IAAI,KAAK,CAAa,iBAC3DD,GAAG,CAASE,KAAK,KAAK,KAAK,MAC1BF,GAAG,YAAYG,WAAW,IAE9B,CAAC;QACD,MAAM,CAAC,KAAK;IACd,CAAC;IAED,EAAuG,AAAvG,qGAAuG;IAEvG,KAAK,CAACC,GAAG,GAAGN,aAAa,CAACO,IAAI,CAACL,GAAG,CAACM,OAAO;IAC1C,EAAE,EAAEF,GAAG,EAAE,CAAC;QACR,KAAK,IAAIG,UAAU,EAAEC,OAAO,EAAEC,MAAM,IAAIL,GAAG;QAC3C,KAAK,CAACM,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,QAAQ,CAACN,UAAU,EAAE,EAAE;QACtD,KAAK,CAACO,MAAM,GAAGH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,QAAQ,CAACL,OAAO,EAAE,EAAE;QAE/C,MAAM,CAAC,GAAG,CA5BqB,mBAAsB,uBA6BhDb,KAAK,CAACoB,IAAI,CAAChB,QAAQ,EAAE,CAAC,EAAEJ,KAAK,CAACqB,MAAM,CACrCN,UAAU,CAACO,QAAQ,IACnB,CAAC,EAAEtB,KAAK,CAACqB,MAAM,CAACF,MAAM,CAACG,QAAQ,OACjCtB,KAAK,CAACuB,GAAG,CAACC,IAAI,CAAC,CAAc,eAAEC,MAAM,EAAE,EAAE,EAAEX,MAAM;IAErD,CAAC;IAED,MAAM,CAAC,KAAK;AACd,CAAC"}