{"version":3,"sources":["../../../../../build/webpack/plugins/wellknown-errors-plugin/parseBabel.ts"],"sourcesContent":["import Chalk from 'next/dist/compiled/chalk'\nimport { SimpleWebpackError } from './simpleWebpackError'\n\nconst chalk = new Chalk.constructor({ enabled: true })\n\nexport function getBabelError(\n  fileName: string,\n  err: Error & {\n    code?: string | number\n    loc?: { line: number; column: number }\n  }\n): SimpleWebpackError | false {\n  if (err.code !== 'BABEL_PARSE_ERROR') {\n    return false\n  }\n\n  // https://github.com/babel/babel/blob/34693d6024da3f026534dd8d569f97ac0109602e/packages/babel-core/src/parser/index.js\n  if (err.loc) {\n    const lineNumber = Math.max(1, err.loc.line)\n    const column = Math.max(1, err.loc.column)\n\n    let message = err.message\n      // Remove file information, which instead is provided by webpack.\n      .replace(/^.+?: /, '')\n      // Remove column information from message\n      .replace(\n        new RegExp(`[^\\\\S\\\\r\\\\n]*\\\\(${lineNumber}:${column}\\\\)[^\\\\S\\\\r\\\\n]*`),\n        ''\n      )\n\n    return new SimpleWebpackError(\n      `${chalk.cyan(fileName)}:${chalk.yellow(\n        lineNumber.toString()\n      )}:${chalk.yellow(column.toString())}`,\n      chalk.red.bold('Syntax error').concat(`: ${message}`)\n    )\n  }\n\n  return false\n}\n"],"names":["getBabelError","chalk","constructor","enabled","fileName","err","code","loc","lineNumber","Math","max","line","column","message","replace","RegExp","cyan","yellow","toString","red","bold","concat"],"mappings":";;;;QAKgBA,aAAa,GAAbA,aAAa;AALX,GAA0B,CAA1B,MAA0B;AACT,GAAsB,CAAtB,mBAAsB;;;;;;AAEzD,KAAK,CAACC,KAAK,GAAG,GAAG,CAHC,MAA0B,SAGpBC,WAAW,CAAC,CAAC;IAACC,OAAO,EAAE,IAAI;AAAC,CAAC;SAErCH,aAAa,CAC3BI,QAAgB,EAChBC,GAGC,EAC2B,CAAC;IAC7B,EAAE,EAAEA,GAAG,CAACC,IAAI,KAAK,CAAmB,oBAAE,CAAC;QACrC,MAAM,CAAC,KAAK;IACd,CAAC;IAED,EAAuH,AAAvH,qHAAuH;IACvH,EAAE,EAAED,GAAG,CAACE,GAAG,EAAE,CAAC;QACZ,KAAK,CAACC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,GAAG,CAACE,GAAG,CAACI,IAAI;QAC3C,KAAK,CAACC,MAAM,GAAGH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,GAAG,CAACE,GAAG,CAACK,MAAM;QAEzC,GAAG,CAACC,OAAO,GAAGR,GAAG,CAACQ,OAAO,AACvB,EAAiE,AAAjE,+DAAiE;SAChEC,OAAO,WAAW,CAAE,EACrB,EAAyC,AAAzC,uCAAyC;SACxCA,OAAO,CACN,GAAG,CAACC,MAAM,EAAE,gBAAgB,EAAEP,UAAU,CAAC,CAAC,EAAEI,MAAM,CAAC,gBAAgB,IACnE,CAAE;QAGN,MAAM,CAAC,GAAG,CA7BqB,mBAAsB,uBA8BhDX,KAAK,CAACe,IAAI,CAACZ,QAAQ,EAAE,CAAC,EAAEH,KAAK,CAACgB,MAAM,CACrCT,UAAU,CAACU,QAAQ,IACnB,CAAC,EAAEjB,KAAK,CAACgB,MAAM,CAACL,MAAM,CAACM,QAAQ,OACjCjB,KAAK,CAACkB,GAAG,CAACC,IAAI,CAAC,CAAc,eAAEC,MAAM,EAAE,EAAE,EAAER,OAAO;IAEtD,CAAC;IAED,MAAM,CAAC,KAAK;AACd,CAAC"}