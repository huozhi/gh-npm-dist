{"version":3,"sources":["../../../../build/webpack/loaders/next-middleware-loader.ts"],"sourcesContent":["import { stringifyRequest } from '../stringify-request'\n\nexport type MiddlewareLoaderOptions = {\n  absolutePagePath: string\n  page: string\n}\n\nexport default function middlewareLoader(this: any) {\n  const { absolutePagePath, page }: MiddlewareLoaderOptions = this.getOptions()\n  const stringifiedPagePath = stringifyRequest(this, absolutePagePath)\n\n  return `\n        import { adapter } from 'next/dist/server/web/adapter'\n\n        var mod = require(${stringifiedPagePath})\n        var handler = mod.middleware || mod.default;\n\n        if (typeof handler !== 'function') {\n          throw new Error('The Middleware \"pages${page}\" must export a \\`middleware\\` or a \\`default\\` function');\n        }\n\n        export default function (opts) {\n          return adapter({\n              ...opts,\n              page: ${JSON.stringify(page)},\n              handler,\n          })\n        }\n    `\n}\n"],"names":["middlewareLoader","absolutePagePath","page","getOptions","stringifiedPagePath","JSON","stringify"],"mappings":";;;;kBAOwBA,gBAAgB;AAPP,GAAsB,CAAtB,iBAAsB;SAO/BA,gBAAgB,GAAY,CAAC;IACnD,KAAK,CAAC,CAAC,CAACC,gBAAgB,GAAEC,IAAI,EAAC,CAAC,GAA4B,IAAI,CAACC,UAAU;IAC3E,KAAK,CAACC,mBAAmB,OATM,iBAAsB,mBASR,IAAI,EAAEH,gBAAgB;IAEnE,MAAM,EAAE;;;0BAGgB,EAAEG,mBAAmB,CAAC;;;;gDAIA,EAAEF,IAAI,CAAC;;;;;;oBAMnC,EAAEG,IAAI,CAACC,SAAS,CAACJ,IAAI,EAAE;;;;IAIvC;AACJ,CAAC"}