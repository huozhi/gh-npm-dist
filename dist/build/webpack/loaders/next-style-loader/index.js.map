{"version":3,"sources":["../../../../../build/webpack/loaders/next-style-loader/index.js"],"sourcesContent":["import path from 'path'\nimport isEqualLocals from './runtime/isEqualLocals'\nimport { stringifyRequest } from '../../stringify-request'\n\nconst loaderApi = () => {}\n\nloaderApi.pitch = function loader(request) {\n  const loaderSpan = this.currentTraceSpan.traceChild('next-style-loader')\n\n  return loaderSpan.traceFn(() => {\n    const options = this.getOptions()\n\n    const insert =\n      typeof options.insert === 'undefined'\n        ? '\"head\"'\n        : typeof options.insert === 'string'\n        ? JSON.stringify(options.insert)\n        : options.insert.toString()\n    const injectType = options.injectType || 'styleTag'\n    const esModule =\n      typeof options.esModule !== 'undefined' ? options.esModule : false\n\n    delete options.esModule\n\n    switch (injectType) {\n      case 'linkTag': {\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  module.hot.accept(\n    ${stringifyRequest(this, `!!${request}`)},\n    function() {\n     ${\n       esModule\n         ? 'update(content);'\n         : `content = require(${stringifyRequest(this, `!!${request}`)});\n\n           content = content.__esModule ? content.default : content;\n\n           update(content);`\n     }\n    }\n  );\n\n  module.hot.dispose(function() {\n    update();\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${stringifyRequest(\n                this,\n                `!${path.join(__dirname, 'runtime/injectStylesIntoLinkTag.js')}`\n              )};\n            import content from ${stringifyRequest(this, `!!${request}`)};`\n            : `var api = require(${stringifyRequest(\n                this,\n                `!${path.join(__dirname, 'runtime/injectStylesIntoLinkTag.js')}`\n              )});\n            var content = require(${stringifyRequest(this, `!!${request}`)});\n\n            content = content.__esModule ? content.default : content;`\n        }\n\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\n\nvar update = api(content, options);\n\n${hmrCode}\n\n${esModule ? 'export default {}' : ''}`\n      }\n\n      case 'lazyStyleTag':\n      case 'lazySingletonStyleTag': {\n        const isSingleton = injectType === 'lazySingletonStyleTag'\n\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = ${isEqualLocals.toString()};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      ${stringifyRequest(this, `!!${request}`)},\n      function () {\n        ${\n          esModule\n            ? `if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              if (update && refs > 0) {\n                update(content);\n              }`\n            : `content = require(${stringifyRequest(this, `!!${request}`)});\n\n              content = content.__esModule ? content.default : content;\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              if (update && refs > 0) {\n                update(content);\n              }`\n        }\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    if (update) {\n      update();\n    }\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )};\n            import content from ${stringifyRequest(this, `!!${request}`)};`\n            : `var api = require(${stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )});\n            var content = require(${stringifyRequest(this, `!!${request}`)});\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }`\n        }\n\nvar refs = 0;\nvar update;\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\noptions.singleton = ${isSingleton};\n\nvar exported = {};\n\nexported.locals = content.locals || {};\nexported.use = function() {\n  if (!(refs++)) {\n    update = api(content, options);\n  }\n\n  return exported;\n};\nexported.unuse = function() {\n  if (refs > 0 && !--refs) {\n    update();\n    update = null;\n  }\n};\n\n${hmrCode}\n\n${esModule ? 'export default' : 'module.exports ='} exported;`\n      }\n\n      case 'styleTag':\n      case 'singletonStyleTag':\n      default: {\n        const isSingleton = injectType === 'singletonStyleTag'\n\n        const hmrCode = this.hot\n          ? `\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = ${isEqualLocals.toString()};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      ${stringifyRequest(this, `!!${request}`)},\n      function () {\n        ${\n          esModule\n            ? `if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);`\n            : `content = require(${stringifyRequest(this, `!!${request}`)});\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);`\n        }\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}`\n          : ''\n\n        return `${\n          esModule\n            ? `import api from ${stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )};\n            import content from ${stringifyRequest(this, `!!${request}`)};`\n            : `var api = require(${stringifyRequest(\n                this,\n                `!${path.join(\n                  __dirname,\n                  'runtime/injectStylesIntoStyleTag.js'\n                )}`\n              )});\n            var content = require(${stringifyRequest(this, `!!${request}`)});\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }`\n        }\n\nvar options = ${JSON.stringify(options)};\n\noptions.insert = ${insert};\noptions.singleton = ${isSingleton};\n\nvar update = api(content, options);\n\n${hmrCode}\n\n${esModule ? 'export default' : 'module.exports ='} content.locals || {};`\n      }\n    }\n  })\n}\n\nmodule.exports = loaderApi\n"],"names":["loaderApi","pitch","loader","request","loaderSpan","currentTraceSpan","traceChild","traceFn","options","getOptions","insert","JSON","stringify","toString","injectType","esModule","hmrCode","hot","join","__dirname","isSingleton","module","exports"],"mappings":"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"}