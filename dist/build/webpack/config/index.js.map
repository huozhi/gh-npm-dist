{"version":3,"sources":["../../../../build/webpack/config/index.ts"],"sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { NextConfigComplete } from '../../../server/config-shared'\nimport { base } from './blocks/base'\nimport { css } from './blocks/css'\nimport { images } from './blocks/images'\nimport { ConfigurationContext, pipe } from './utils'\n\nexport async function build(\n  config: webpack.Configuration,\n  {\n    supportedBrowsers,\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isServer,\n    webServerRuntime,\n    targetWeb,\n    assetPrefix,\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n    experimental,\n    disableStaticImages,\n  }: {\n    supportedBrowsers: string[] | undefined\n    rootDirectory: string\n    customAppFile: RegExp\n    isDevelopment: boolean\n    isServer: boolean\n    webServerRuntime: boolean\n    targetWeb: boolean\n    assetPrefix: string\n    sassOptions: any\n    productionBrowserSourceMaps: boolean\n    future: NextConfigComplete['future']\n    experimental: NextConfigComplete['experimental']\n    disableStaticImages: NextConfigComplete['disableStaticImages']\n  }\n): Promise<webpack.Configuration> {\n  const ctx: ConfigurationContext = {\n    supportedBrowsers,\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isProduction: !isDevelopment,\n    isServer,\n    webServerRuntime,\n    isClient: !isServer,\n    targetWeb,\n    assetPrefix: assetPrefix\n      ? assetPrefix.endsWith('/')\n        ? assetPrefix.slice(0, -1)\n        : assetPrefix\n      : '',\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n    experimental,\n  }\n\n  let fns = [base(ctx), css(ctx)]\n  if (!disableStaticImages) {\n    fns.push(images(ctx))\n  }\n  const fn = pipe(...fns)\n  return fn(config)\n}\n"],"names":["build","config","supportedBrowsers","rootDirectory","customAppFile","isDevelopment","isServer","webServerRuntime","targetWeb","assetPrefix","sassOptions","productionBrowserSourceMaps","future","experimental","disableStaticImages","ctx","isProduction","isClient","endsWith","slice","fns","base","push","fn"],"mappings":";;;;QAOsBA,KAAK,GAALA,KAAK;AALN,GAAe,CAAf,KAAe;AAChB,GAAc,CAAd,IAAc;AACX,GAAiB,CAAjB,OAAiB;AACG,GAAS,CAAT,MAAS;eAE9BA,KAAK,CACzBC,MAA6B,EAC7B,CAAC,CACCC,iBAAiB,GACjBC,aAAa,GACbC,aAAa,GACbC,aAAa,GACbC,QAAQ,GACRC,gBAAgB,GAChBC,SAAS,GACTC,WAAW,GACXC,WAAW,GACXC,2BAA2B,GAC3BC,MAAM,GACNC,YAAY,GACZC,mBAAmB,EAerB,CAAC,EAC+B,CAAC;IACjC,KAAK,CAACC,GAAG,GAAyB,CAAC;QACjCb,iBAAiB;QACjBC,aAAa;QACbC,aAAa;QACbC,aAAa;QACbW,YAAY,GAAGX,aAAa;QAC5BC,QAAQ;QACRC,gBAAgB;QAChBU,QAAQ,GAAGX,QAAQ;QACnBE,SAAS;QACTC,WAAW,EAAEA,WAAW,GACpBA,WAAW,CAACS,QAAQ,CAAC,CAAG,MACtBT,WAAW,CAACU,KAAK,CAAC,CAAC,GAAG,CAAC,IACvBV,WAAW,GACb,CAAE;QACNC,WAAW;QACXC,2BAA2B;QAC3BC,MAAM;QACNC,YAAY;IACd,CAAC;IAED,GAAG,CAACO,GAAG,GAAG,CAACC;YA1DQ,KAAe,OA0DlBN,GAAG;YAzDD,IAAc,MAyDNA,GAAG;IAAC,CAAC;IAC/B,EAAE,GAAGD,mBAAmB,EAAE,CAAC;QACzBM,GAAG,CAACE,IAAI,KA1DW,OAAiB,SA0DpBP,GAAG;IACrB,CAAC;IACD,KAAK,CAACQ,EAAE,OA3DiC,MAAS,UA2D/BH,GAAG;IACtB,MAAM,CAACG,EAAE,CAACtB,MAAM;AAClB,CAAC"}