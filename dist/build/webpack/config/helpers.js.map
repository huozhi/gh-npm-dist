{"version":3,"sources":["../../../../build/webpack/config/helpers.ts"],"sourcesContent":["import curry from 'next/dist/compiled/lodash.curry'\nimport { webpack } from 'next/dist/compiled/webpack/webpack'\n\nexport const loader = curry(function loader(\n  rule: webpack.RuleSetRule,\n  config: webpack.Configuration\n) {\n  if (!config.module) {\n    config.module = { rules: [] }\n  }\n\n  if (rule.oneOf) {\n    const existing = config.module.rules.find((arrayRule) => arrayRule.oneOf)\n    if (existing) {\n      existing.oneOf!.push(...rule.oneOf)\n      return config\n    }\n  }\n\n  config.module.rules.push(rule)\n  return config\n})\n\nexport const unshiftLoader = curry(function unshiftLoader(\n  rule: webpack.RuleSetRule,\n  config: webpack.Configuration\n) {\n  if (!config.module) {\n    config.module = { rules: [] }\n  }\n\n  if (rule.oneOf) {\n    const existing = config.module.rules.find((arrayRule) => arrayRule.oneOf)\n    if (existing) {\n      existing.oneOf!.unshift(...rule.oneOf)\n      return config\n    }\n  }\n\n  config.module.rules.unshift(rule)\n  return config\n})\n\nexport const plugin = curry(function plugin(\n  p: webpack.Plugin,\n  config: webpack.Configuration\n) {\n  if (!config.plugins) {\n    config.plugins = []\n  }\n  config.plugins.push(p)\n  return config\n})\n"],"names":["loader","rule","config","module","rules","oneOf","existing","find","arrayRule","push","unshiftLoader","unshift","plugin","p","plugins"],"mappings":";;;;;AAAkB,GAAiC,CAAjC,YAAiC;;;;;;AAG5C,KAAK,CAACA,MAAM,OAHD,YAAiC,UAGvB,QAAQ,CAACA,MAAM,CACzCC,IAAyB,EACzBC,MAA6B,EAC7B,CAAC;IACD,EAAE,GAAGA,MAAM,CAACC,MAAM,EAAE,CAAC;QACnBD,MAAM,CAACC,MAAM,GAAG,CAAC;YAACC,KAAK,EAAE,CAAC,CAAC;QAAC,CAAC;IAC/B,CAAC;IAED,EAAE,EAAEH,IAAI,CAACI,KAAK,EAAE,CAAC;QACf,KAAK,CAACC,QAAQ,GAAGJ,MAAM,CAACC,MAAM,CAACC,KAAK,CAACG,IAAI,EAAEC,SAAS,GAAKA,SAAS,CAACH,KAAK;;QACxE,EAAE,EAAEC,QAAQ,EAAE,CAAC;YACbA,QAAQ,CAACD,KAAK,CAAEI,IAAI,IAAIR,IAAI,CAACI,KAAK;YAClC,MAAM,CAACH,MAAM;QACf,CAAC;IACH,CAAC;IAEDA,MAAM,CAACC,MAAM,CAACC,KAAK,CAACK,IAAI,CAACR,IAAI;IAC7B,MAAM,CAACC,MAAM;AACf,CAAC;QAlBYF,MAAM,GAANA,MAAM;AAoBZ,KAAK,CAACU,aAAa,OAvBR,YAAiC,UAuBhB,QAAQ,CAACA,aAAa,CACvDT,IAAyB,EACzBC,MAA6B,EAC7B,CAAC;IACD,EAAE,GAAGA,MAAM,CAACC,MAAM,EAAE,CAAC;QACnBD,MAAM,CAACC,MAAM,GAAG,CAAC;YAACC,KAAK,EAAE,CAAC,CAAC;QAAC,CAAC;IAC/B,CAAC;IAED,EAAE,EAAEH,IAAI,CAACI,KAAK,EAAE,CAAC;QACf,KAAK,CAACC,QAAQ,GAAGJ,MAAM,CAACC,MAAM,CAACC,KAAK,CAACG,IAAI,EAAEC,SAAS,GAAKA,SAAS,CAACH,KAAK;;QACxE,EAAE,EAAEC,QAAQ,EAAE,CAAC;YACbA,QAAQ,CAACD,KAAK,CAAEM,OAAO,IAAIV,IAAI,CAACI,KAAK;YACrC,MAAM,CAACH,MAAM;QACf,CAAC;IACH,CAAC;IAEDA,MAAM,CAACC,MAAM,CAACC,KAAK,CAACO,OAAO,CAACV,IAAI;IAChC,MAAM,CAACC,MAAM;AACf,CAAC;QAlBYQ,aAAa,GAAbA,aAAa;AAoBnB,KAAK,CAACE,MAAM,OA3CD,YAAiC,UA2CvB,QAAQ,CAACA,MAAM,CACzCC,CAAiB,EACjBX,MAA6B,EAC7B,CAAC;IACD,EAAE,GAAGA,MAAM,CAACY,OAAO,EAAE,CAAC;QACpBZ,MAAM,CAACY,OAAO,GAAG,CAAC,CAAC;IACrB,CAAC;IACDZ,MAAM,CAACY,OAAO,CAACL,IAAI,CAACI,CAAC;IACrB,MAAM,CAACX,MAAM;AACf,CAAC;QATYU,MAAM,GAANA,MAAM"}