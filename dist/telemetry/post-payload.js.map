{"version":3,"sources":["../../telemetry/post-payload.ts"],"sourcesContent":["import retry from 'next/dist/compiled/async-retry'\nimport fetch from 'next/dist/compiled/node-fetch'\n\nexport function _postPayload(endpoint: string, body: object) {\n  return (\n    retry(\n      () =>\n        fetch(endpoint, {\n          method: 'POST',\n          body: JSON.stringify(body),\n          headers: { 'content-type': 'application/json' },\n          timeout: 5000,\n        }).then((res) => {\n          if (!res.ok) {\n            const err = new Error(res.statusText)\n            ;(err as any).response = res\n            throw err\n          }\n        }),\n      { minTimeout: 500, retries: 1, factor: 1 }\n    )\n      .catch(() => {\n        // We swallow errors when telemetry cannot be sent\n      })\n      // Ensure promise is voided\n      .then(\n        () => {},\n        () => {}\n      )\n  )\n}\n"],"names":["_postPayload","endpoint","body","method","JSON","stringify","headers","timeout","then","res","ok","err","Error","statusText","response","minTimeout","retries","factor","catch"],"mappings":";;;;QAGgBA,YAAY,GAAZA,YAAY;AAHV,GAAgC,CAAhC,WAAgC;AAChC,GAA+B,CAA/B,UAA+B;;;;;;SAEjCA,YAAY,CAACC,QAAgB,EAAEC,IAAY,EAAE,CAAC;IAC5D,MAAM,KAJU,WAAgC,kBAChC,UAA+B,UAMnCD,QAAQ,EAAE,CAAC;YACfE,MAAM,EAAE,CAAM;YACdD,IAAI,EAAEE,IAAI,CAACC,SAAS,CAACH,IAAI;YACzBI,OAAO,EAAE,CAAC;gBAAC,CAAc,eAAE,CAAkB;YAAC,CAAC;YAC/CC,OAAO,EAAE,IAAI;QACf,CAAC,EAAEC,IAAI,EAAEC,GAAG,GAAK,CAAC;YAChB,EAAE,GAAGA,GAAG,CAACC,EAAE,EAAE,CAAC;gBACZ,KAAK,CAACC,GAAG,GAAG,GAAG,CAACC,KAAK,CAACH,GAAG,CAACI,UAAU;gBAClCF,GAAG,CAASG,QAAQ,GAAGL,GAAG;gBAC5B,KAAK,CAACE,GAAG;YACX,CAAC;QACH,CAAC;MACH,CAAC;QAACI,UAAU,EAAE,GAAG;QAAEC,OAAO,EAAE,CAAC;QAAEC,MAAM,EAAE,CAAC;IAAC,CAAC,EAEzCC,KAAK,KAAO,CAAC;IACZ,EAAkD,AAAlD,gDAAkD;IACpD,CAAC,CACD,EAA2B,AAA3B,yBAA2B;KAC1BV,IAAI,KACG,CAAC,CAAC,MACF,CAAC,CAAC;AAGhB,CAAC"}